<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski Jumping 2025 - Lillehammer & Falun</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useMemo, useEffect } from 'https://esm.sh/react@18.2.0';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
        
        import { 
            Calendar, Filter, Search, ChevronDown, ChevronUp, Snowflake, Trophy, 
            Calculator, CheckSquare, Square, Star, Users, Globe, AlertCircle, 
            XCircle, Sun, Eye, EyeOff, Sliders, MapPin, ChevronRight
        } from 'https://esm.sh/lucide-react@0.292.0';

        // Komponent ErrorBoundary
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null };
            }
            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }
            render() {
                if (this.state.hasError) {
                    return (
                        <div className="p-10 text-center text-red-600 bg-red-50 m-4 rounded-xl border border-red-200">
                            <h1 className="text-xl font-bold mb-2">Wyst?pi? b??d aplikacji ??</h1>
                            <p className="font-mono text-sm bg-white p-2 rounded border border-red-100 inline-block">
                                {this.state.error.toString()}
                            </p>
                            <p className="mt-4 text-sm text-slate-500">Spr¨®buj od?wie?y? stron?.</p>
                        </div>
                    );
                }
                return this.props.children;
            }
        }

        // --- DANE LILLEHAMMER ---
        const LILLEHAMMER_DATA = [
            { name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", t1: 82.3, t2: 91.6, m1: 141.5, m2: 135.2, q1: 135.5, c1_1: 156.8, c1_2: 147.3, q2: 137.4, c2_1: 144.4, c2_2: 146.1 },
            { name: "Domen Prevc", country: "SLO", isoCode: "si", t1: 0, t2: 109.6, m1: 148.4, m2: 139.2, q1: 128.5, c1_1: 159.7, c1_2: 145.1, q2: 140.9, c2_1: 147.9, c2_2: 139.4 },
            { name: "Felix Hoffmann", country: "GER", isoCode: "de", t1: 95.8, t2: 106.6, m1: 143.1, m2: 144.9, q1: 146.1, c1_1: 158.9, c1_2: 134.7, q2: 130.8, c2_1: 143.8, c2_2: 142.4 },
            { name: "Philipp Raimund", country: "GER", isoCode: "de", t1: 80.1, t2: 87.1, m1: 133.7, m2: 131.2, q1: 137.5, c1_1: 154.9, c1_2: 148.5, q2: 132.8, c2_1: 144.1, c2_2: 141.3 },
            { name: "Stefan Kraft", country: "AUT", isoCode: "at", t1: 86.7, t2: 93.6, m1: 134.2, m2: 142.0, q1: 147.5, c1_1: 161.9, c1_2: 144.4, q2: 135.2, c2_1: 142.6, c2_2: 140.1 },
            { name: "Anze Lanisek", country: "SLO", isoCode: "si", t1: 83.9, t2: 96.7, m1: 0, m2: 0, q1: 133.1, c1_1: 156.8, c1_2: 140.2, q2: 130.1, c2_1: 143.5, c2_2: 136.7 },
            { name: "Daniel Tschofenig", country: "AUT", isoCode: "at", t1: 65.8, t2: 89.3, m1: 0, m2: 0, q1: 133.6, c1_1: 158.0, c1_2: 153.5, q2: 132.3, c2_1: 129.3, c2_2: 142.1 },
            { name: "Jan Hoerl", country: "AUT", isoCode: "at", t1: 87.8, t2: 109.4, m1: 148.5, m2: 145.6, q1: 139.0, c1_1: 156.8, c1_2: 150.4, q2: 144.7, c2_1: 142.2, c2_2: 125.8 },
            { name: "Stephan Embacher", country: "AUT", isoCode: "at", t1: 86.6, t2: 99.5, m1: 0, m2: 0, q1: 148.0, c1_1: 154.0, c1_2: 139.5, q2: 130.0, c2_1: 137.4, c2_2: 125.3 },
            { name: "Ren Nikaido", country: "JPN", isoCode: "jp", t1: 87.8, t2: 91.3, m1: 126.0, m2: 133.2, q1: 131.1, c1_1: 150.6, c1_2: 129.9, q2: 128.1, c2_1: 128.3, c2_2: 128.4 },
            { name: "Naoki Nakamura", country: "JPN", isoCode: "jp", t1: 85.9, t2: 91.5, m1: 0, m2: 0, q1: 112.6, c1_1: 139.1, c1_2: 129.6, q2: 120.3, c2_1: 129.5, c2_2: 126.6 },
            { name: "Kamil Stoch", country: "POL", isoCode: "pl", t1: 80.6, t2: 91.2, m1: 126.9, m2: 137.4, q1: 145.1, c1_1: 154.2, c1_2: 137.1, q2: 126.0, c2_1: 137.8, c2_2: 115.3 },
            { name: "Timi Zajc", country: "SLO", isoCode: "si", t1: 84.1, t2: 102.6, m1: 125.0, m2: 130.3, q1: 128.3, c1_1: 154.4, c1_2: 141.2, q2: 126.3, c2_1: 130.9, c2_2: 115.0 },
            { name: "Artti Aigro", country: "EST", isoCode: "ee", t1: 86.2, t2: 98.2, m1: 0, m2: 0, q1: 123.1, c1_1: 151.2, c1_2: 137.9, q2: 126.5, c2_1: 126.4, c2_2: 118.7 },
            { name: "Manuel Fettner", country: "AUT", isoCode: "at", t1: 81.6, t2: 97.2, m1: 0, m2: 0, q1: 118.6, c1_1: 149.1, c1_2: 144.7, q2: 124.5, c2_1: 124.2, c2_2: 119.8 },
            { name: "Valentin Foubert", country: "FRA", isoCode: "fr", t1: 69.7, t2: 84.1, m1: 120.8, m2: 0, q1: 122.5, c1_1: 143.2, c1_2: 129.4, q2: 120.1, c2_1: 125.8, c2_2: 117.3 },
            { name: "Marius Lindvik", country: "NOR", isoCode: "no", t1: 81.9, t2: 98.2, m1: 124.4, m2: 131.4, q1: 114.7, c1_1: 149.1, c1_2: 135.0, q2: 126.8, c2_1: 125.7, c2_2: 117.3 },
            { name: "Maximilian Ortner", country: "AUT", isoCode: "at", t1: 82.1, t2: 84.3, m1: 0, m2: 0, q1: 128.6, c1_1: 142.4, c1_2: 132.5, q2: 117.4, c2_1: 118.0, c2_2: 124.9 },
            { name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", t1: 96.7, t2: 104.7, m1: 117.4, m2: 121.4, q1: 123.7, c1_1: 129.8, c1_2: 0, q2: 119.2, c2_1: 121.0, c2_2: 120.4 },
            { name: "Dawid Kubacki", country: "POL", isoCode: "pl", t1: 64.9, t2: 77.7, m1: 0, m2: 0, q1: 114.9, c1_1: 135.1, c1_2: 142.0, q2: 107.8, c2_1: 117.9, c2_2: 120.9 },
            { name: "Antti Aalto", country: "FIN", isoCode: "fi", t1: 76.1, t2: 86.8, m1: 112.6, m2: 117.8, q1: 129.6, c1_1: 138.4, c1_2: 134.3, q2: 113.5, c2_1: 120.3, c2_2: 114.8 },
            { name: "Kacper Tomasiak", country: "POL", isoCode: "pl", t1: 73.6, t2: 90.6, m1: 126.7, m2: 120.6, q1: 129.9, c1_1: 144.4, c1_2: 138.8, q2: 118.2, c2_1: 123.2, c2_2: 111.6 },
            { name: "Karl Geiger", country: "GER", isoCode: "de", t1: 61.0, t2: 72.0, m1: 0, m2: 0, q1: 116.1, c1_1: 124.5, c1_2: 0, q2: 107.0, c2_1: 117.3, c2_2: 116.9 },
            { name: "Vladimir Zografski", country: "BUL", isoCode: "bg", t1: 86.3, t2: 94.0, m1: 0, m2: 0, q1: 134.4, c1_1: 144.5, c1_2: 147.6, q2: 120.7, c2_1: 119.7, c2_2: 114.0 },
            { name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", t1: 77.4, t2: 88.8, m1: 0, m2: 0, q1: 132.9, c1_1: 146.1, c1_2: 138.8, q2: 122.7, c2_1: 113.7, c2_2: 119.9 },
            { name: "Jason Colby", country: "USA", isoCode: "us", t1: 74.4, t2: 83.3, m1: 0, m2: 0, q1: 133.6, c1_1: 139.2, c1_2: 141.0, q2: 106.9, c2_1: 124.4, c2_2: 108.0 },
            { name: "Pius Paschke", country: "GER", isoCode: "de", t1: 81.5, t2: 87.9, m1: 0, m2: 0, q1: 110.8, c1_1: 0, c1_2: 0, q2: 121.1, c2_1: 120.1, c2_2: 109.6 },
            { name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", t1: 58.5, t2: 81.3, m1: 0, m2: 0, q1: 140.1, c1_1: 145.8, c1_2: 137.7, q2: 127.0, c2_1: 118.1, c2_2: 109.7 },
            { name: "Juri Kesseli", country: "SUI", isoCode: "ch", t1: 73.0, t2: 72.1, m1: 0, m2: 0, q1: 114.6, c1_1: 118.9, c1_2: 0, q2: 107.6, c2_1: 116.1, c2_2: 107.5 },
            { name: "Tomofumi Naito", country: "JPN", isoCode: "jp", t1: 73.0, t2: 78.9, m1: 0, m2: 0, q1: 124.9, c1_1: 134.3, c1_2: 0, q2: 109.2, c2_1: 114.1, c2_2: 109.1 },

            // --- ODPADLI W 1. SERII NIEDZIELI ---
            { name: "Kevin Bickner", country: "USA", isoCode: "us", t1: 79.6, t2: 91.1, m1: 114.6, m2: 0, q1: 114.4, c1_1: 130.7, c1_2: 0, q2: 111.7, c1_2: 0, c2_1: 113.6, c2_2: 0 },
            { name: "Sandro Hauswirth", country: "SUI", isoCode: "ch", t1: 58.3, t2: 63.7, m1: 110.4, m2: 0, q1: 125.0, c1_1: 132.3, c1_2: 0, q2: 110.8, c2_1: 111.9, c2_2: 0 },
            { name: "Mackenzie Boyd-Clowes", country: "CAN", isoCode: "ca", t1: 58.3, t2: 67.6, m1: 108.5, m2: 112.3, q1: 107.0, c1_1: 0, c1_2: 0, q2: 111.3, c2_1: 111.9, c2_2: 0 },
            { name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", t1: 57.6, t2: 78.9, m1: 0, m2: 0, q1: 121.7, c1_1: 137.3, c1_2: 134.6, q2: 113.7, c2_1: 111.4, c2_2: 0 },
            { name: "Piotr ?y?a", country: "POL", isoCode: "pl", t1: 63.7, t2: 74.5, m1: 0, m2: 0, q1: 120.3, c1_1: 139.0, c1_2: 144.0, q2: 112.7, c2_1: 111.2, c2_2: 0 },
            { name: "Pawe? W?sek", country: "POL", isoCode: "pl", t1: 53.5, t2: 81.4, m1: 0, m2: 0, q1: 121.4, c1_1: 135.0, c1_2: 133.7, q2: 116.2, c2_1: 111.1, c2_2: 0 },
            { name: "Tate Frantz", country: "USA", isoCode: "us", t1: 78.1, t2: 84.2, m1: 0, m2: 0, q1: 129.3, c1_1: 131.5, c1_2: 0, q2: 105.9, c2_1: 110.6, c2_2: 0 },
            { name: "Jules Chervet", country: "FRA", isoCode: "fr", t1: 62.6, t2: 71.7, m1: 84.5, m2: 0, q1: 94.5, c1_1: 0, c1_2: 0, q2: 102.4, c2_1: 109.8, c2_2: 0 },
            { name: "Simon Ammann", country: "SUI", isoCode: "ch", t1: 54.3, t2: 74.4, m1: 0, m2: 0, q1: 119.6, c1_1: 123.4, c1_2: 0, q2: 116.1, c2_1: 109.6, c2_2: 0 },
            { name: "Andreas Wellinger", country: "GER", isoCode: "de", t1: 35.0, t2: 47.8, m1: 0, m2: 0, q1: 104.9, c1_1: 0, c1_2: 0, q2: 105.4, c2_1: 109.5, c2_2: 0 },
            { name: "Yukiya Sato", country: "JPN", isoCode: "jp", t1: 50.0, t2: 72.5, m1: 0, m2: 0, q1: 129.0, c1_1: 133.0, c1_2: 0, q2: 104.3, c2_1: 106.9, c2_2: 0 },
            { name: "Alex Insam", country: "ITA", isoCode: "it", t1: 71.1, t2: 73.5, m1: 101.0, m2: 0, q1: 97.0, c1_1: 0, c1_2: 0, q2: 99.9, c2_1: 105.2, c2_2: 0 },
            { name: "Roman Koudelka", country: "CZE", isoCode: "cz", t1: 49.8, t2: 59.8, m1: 0, m2: 0, q1: 121.5, c1_1: 127.5, c1_2: 0, q2: 115.1, c2_1: 104.7, c2_2: 0 },
            { name: "Giovanni Bresadola", country: "ITA", isoCode: "it", t1: 72.4, t2: 69.3, m1: 0, m2: 0, q1: 128.7, c1_1: 113.3, c1_2: 0, q2: 108.8, c2_1: 103.1, c2_2: 0 },
            { name: "Rok Oblak", country: "SLO", isoCode: "si", t1: 67.5, t2: 73.8, m1: 0, m2: 0, q1: 118.2, c1_1: 126.8, c1_2: 0, q2: 107.4, c2_1: 100.0, c2_2: 0 },
            { name: "Ilja Miziernykh", country: "KAZ", isoCode: "kz", t1: 0, t2: 63.4, m1: 98.5, m2: 0, q1: 120.8, c1_1: 112.7, c1_2: 0, q2: 100.1, c2_1: 96.7, c2_2: 0 },
            { name: "Vilho Palosaari", country: "FIN", isoCode: "fi", t1: 67.5, t2: 71.2, m1: 112.8, m2: 111.9, q1: 108.9, c1_1: 0, c1_2: 0, q2: 102.0, c2_1: 96.6, c2_2: 0 },
            { name: "Andrew Urlaub", country: "USA", isoCode: "us", t1: 72.8, t2: 90.1, m1: 102.7, m2: 0, q1: 121.3, c1_1: 120.2, c1_2: 0, q2: 102.8, c2_1: 96.1, c2_2: 0 },
            { name: "Danil Vassilyev", country: "KAZ", isoCode: "kz", t1: 0, t2: 66.9, m1: 104.2, m2: 0, q1: 111.5, c1_1: 122.0, c1_2: 0, q2: 103.9, c2_1: 95.7, c2_2: 0 },
            { name: "Aleksander Zniszczo?", country: "POL", isoCode: "pl", t1: 77.3, t2: 74.0, m1: 0, m2: 0, q1: 96.4, c1_1: 0, c1_2: 0, q2: 109.4, c2_1: 91.8, c2_2: 0 },
            
            // --- INNI ---
            { name: "Benjamin Oestvold", country: "NOR", isoCode: "no", t1: 95.0, t2: 104.3, m1: 0, m2: 0, q1: 129.8, c1_1: 138.2, c1_2: 132.9, q2: 92.0, c2_1: 0, c2_2: 0 },
            { name: "Johann Andre Forfang", country: "NOR", isoCode: "no", t1: 86.2, t2: 95.5, m1: 0, m2: 0, q1: 114.4, c1_1: 140.5, c1_2: 126.4, q2: 97.8, c2_1: 0, c2_2: 0 },
            { name: "Lovro Kos", country: "SLO", isoCode: "si", t1: 69.1, t2: 71.1, m1: 0, m2: 0, q1: 120.7, c1_1: 124.6, c1_2: 0, q2: 98.8, c2_1: 0, c2_2: 0 },
            { name: "Fatih Arda Ipcioglu", country: "TUR", isoCode: "tr", t1: 42.4, t2: 45.7, m1: 0, m2: 0, q1: 111.4, c1_1: 116.6, c1_2: 0, q2: 0, c2_1: 0, c2_2: 0 },
            { name: "Erik Belshaw", country: "USA", isoCode: "us", t1: 64.1, t2: 77.1, m1: 0, m2: 0, q1: 120.8, c1_1: 121.1, c1_2: 0, q2: 99.8, c2_1: 0, c2_2: 0 },
            { name: "Vitaliy Kalinichenko", country: "UKR", isoCode: "ua", t1: 57.6, t2: 71.4, m1: 0, m2: 0, q1: 116.9, c1_1: 109.2, c1_2: 0, q2: 89.7, c2_1: 0, c2_2: 0 },
            { name: "Hektor Kapustik", country: "SVK", isoCode: "sk", t1: 53.0, t2: 45.7, m1: 0, m2: 0, q1: 113.2, c1_1: 96.9, c1_2: 0, q2: 0, c2_1: 0, c2_2: 0 },
            { name: "Louis Obersteiner", country: "AUT", isoCode: "at", t1: 53.3, t2: 64.7, m1: 0, m2: 0, q1: 95.6, c1_1: 0, c1_2: 0, q2: 92.0, c2_1: 0, c2_2: 0 },
            { name: "Tarik Vanwieren", country: "CAN", isoCode: "ca", t1: 0, t2: 0, m1: 73.2, m2: 67.6, q1: 87.1, c1_1: 0, c1_2: 0, q2: 74.2, c2_1: 0, c2_2: 0 },
            { name: "Felix Trunz", country: "SUI", isoCode: "ch", t1: 66.0, t2: 67.9, m1: 103.9, m2: 0, q1: 110.2, c1_1: 0, c1_2: 0, q2: 99.3, c2_1: 0, c2_2: 0 },
            { name: "Francesco Cecon", country: "ITA", isoCode: "it", t1: 67.7, t2: 76.2, m1: 102.8, m2: 0, q1: 92.2, c1_1: 0, c1_2: 0, q2: 88.4, c2_1: 0, c2_2: 0 },
            { name: "Yevhen Marusiak", country: "UKR", isoCode: "ua", t1: 0, t2: 51.2, m1: 0, m2: 0, q1: 110.6, c1_1: 0, c1_2: 0, q2: 62.0, c2_1: 0, c2_2: 0 },
            { name: "Muhammed Ali Bedir", country: "TUR", isoCode: "tr", t1: 34.9, t2: 51.8, m1: 0, m2: 0, q1: 82.3, c1_1: 0, c1_2: 0, q2: 66.9, c2_1: 0, c2_2: 0 },
            { name: "Daniel Andrei Cacina", country: "ROU", isoCode: "ro", t1: 39.9, t2: 40.7, m1: 66.4, m2: 0, q1: 80.7, c1_1: 0, c1_2: 0, q2: 67.2, c2_1: 0, c2_2: 0 },
            { name: "Mihnea Alexandru Spulber", country: "ROU", isoCode: "ro", t1: 0, t2: 33.5, m1: 60.6, m2: 0, q1: 66.1, c1_1: 0, c1_2: 0, q2: 59.5, c2_1: 0, c2_2: 0 },
            { name: "Yixin Lyu", country: "CHN", isoCode: "cn", t1: 0, t2: 0, m1: 69.6, m2: 0, q1: 80.3, c1_1: 0, c1_2: 0, q2: 63.5, c2_1: 0, c2_2: 0 },
            { name: "Weijie Zhen", country: "CHN", isoCode: "cn", t1: 0, t2: 0, m1: 50.6, m2: 0, q1: 55.9, c1_1: 0, c1_2: 0, q2: 46.1, c2_1: 0, c2_2: 0 },
            { name: "Svyatoslav Nazarenko", country: "KAZ", isoCode: "kz", t1: 0, t2: 37.3, m1: 0, m2: 0, q1: 79.7, c1_1: 0, c1_2: 0, q2: 45.4, c2_1: 0, c2_2: 0 },
            { name: "Kasperi Valto", country: "FIN", isoCode: "fi", t1: 59.4, t2: 60.5, m1: 0, m2: 0, q1: 0, c1_1: 0, c1_2: 0, q2: 76.6, c2_1: 0, c2_2: 0 },
        ];

        // --- DANE FALUN - 25.11.2025 ---
        const FALUN_DATA = [
            { name: "Daniel Tschofenig", country: "AUT", isoCode: "at", t1: 72.7, t2: 65.2, q: 119.6, c1: 121.0, c2: 119.2 },
            { name: "Stefan Kraft", country: "AUT", isoCode: "at", t1: 75.2, t2: 68.6, q: 118.2, c1: 127.4, c2: 122.5 },
            { name: "Stephan Embacher", country: "AUT", isoCode: "at", t1: 78.8, t2: 70.3, q: 117.0, c1: 119.9, c2: 121.9 },
            { name: "Manuel Fettner", country: "AUT", isoCode: "at", t1: 77.5, t2: 69.7, q: 116.8, c1: 109.0, c2: 117.1 },
            { name: "Felix Hoffmann", country: "GER", isoCode: "de", t1: 75.1, t2: 70.6, q: 116.7, c1: 115.8, c2: 119.9 },
            { name: "Ren Nikaido", country: "JPN", isoCode: "jp", t1: 67.6, t2: 0, q: 114.2, c1: 117.6, c2: 113.6 },
            { name: "Philipp Raimund", country: "GER", isoCode: "de", t1: 67.4, t2: 71.4, q: 113.8, c1: 119.9, c2: 125.0 },
            { name: "Naoki Nakamura", country: "JPN", isoCode: "jp", t1: 0, t2: 60.5, q: 113.6, c1: 115.6, c2: 113.9 },
            { name: "Anze Lanisek", country: "SLO", isoCode: "si", t1: 75.5, t2: 71.3, q: 111.9, c1: 122.2, c2: 125.5 },
            { name: "Kacper Tomasiak", country: "POL", isoCode: "pl", t1: 70.4, t2: 65.5, q: 111.5, c1: 119.4, c2: 111.6 },
            { name: "Jan Hoerl", country: "AUT", isoCode: "at", t1: 79.7, t2: 71.3, q: 111.5, c1: 119.0, c2: 121.6 },
            { name: "Marius Lindvik", country: "NOR", isoCode: "no", t1: 73.6, t2: 68.2, q: 111.1, c1: 118.2, c2: 113.8 },
            { name: "Artti Aigro", country: "EST", isoCode: "ee", t1: 70.1, t2: 63.3, q: 109.9, c1: 116.1, c2: 106.1 },
            { name: "Kamil Stoch", country: "POL", isoCode: "pl", t1: 66.7, t2: 56.9, q: 109.3, c1: 117.2, c2: 111.3 },
            { name: "Pius Paschke", country: "GER", isoCode: "de", t1: 0, t2: 57.1, q: 108.5, c1: 110.9, c2: 114.0 },
            { name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", t1: 69.7, t2: 60.2, q: 108.1, c1: 113.5, c2: 107.7 },
            { name: "Antti Aalto", country: "FIN", isoCode: "fi", t1: 70.8, t2: 60.9, q: 107.9, c1: 113.5, c2: 110.3 },
            { name: "Jason Colby", country: "USA", isoCode: "us", t1: 65.7, t2: 63.5, q: 107.0, c1: 106.4, c2: 0 },
            { name: "Maximilian Ortner", country: "AUT", isoCode: "at", t1: 69.4, t2: 60.3, q: 105.7, c1: 112.7, c2: 114.3 },
            { name: "Sandro Hauswirth", country: "SUI", isoCode: "ch", t1: 56.9, t2: 55.7, q: 105.4, c1: 106.3, c2: 0 },
            { name: "Rok Oblak", country: "SLO", isoCode: "si", t1: 66.5, t2: 56.6, q: 104.2, c1: 111.5, c2: 111.0 },
            { name: "Erik Belshaw", country: "USA", isoCode: "us", t1: 64.3, t2: 57.6, q: 104.1, c1: 98.5, c2: 0 },
            { name: "Tomofumi Naito", country: "JPN", isoCode: "jp", t1: 64.2, t2: 56.8, q: 103.9, c1: 105.1, c2: 0 },
            { name: "Dawid Kubacki", country: "POL", isoCode: "pl", t1: 60.7, t2: 51.7, q: 103.8, c1: 106.8, c2: 0 },
            { name: "Yukiya Sato", country: "JPN", isoCode: "jp", t1: 60.1, t2: 51.4, q: 103.6, c1: 109.0, c2: 103.5 },
            { name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", t1: 66.4, t2: 57.9, q: 103.6, c1: 108.0, c2: 99.4 },
            { name: "Johann Andre Forfang", country: "NOR", isoCode: "no", t1: 64.7, t2: 59.0, q: 103.4, c1: 109.0, c2: 109.8 },
            { name: "Timi Zajc", country: "SLO", isoCode: "si", t1: 68.5, t2: 63.4, q: 103.2, c1: 112.0, c2: 108.1 },
            { name: "Pawe? W?sek", country: "POL", isoCode: "pl", t1: 63.3, t2: 58.2, q: 102.6, c1: 108.4, c2: 105.8 },
            { name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", t1: 0, t2: 64.8, q: 102.5, c1: 120.1, c2: 117.4 },
            { name: "Felix Trunz", country: "SUI", isoCode: "ch", t1: 63.4, t2: 60.3, q: 102.4, c1: 104.6, c2: 0 },
            { name: "Tate Frantz", country: "USA", isoCode: "us", t1: 67.5, t2: 57.4, q: 101.9, c1: 108.1, c2: 104.6 },
            { name: "Andreas Wellinger", country: "GER", isoCode: "de", t1: 57.4, t2: 52.8, q: 101.6, c1: 114.7, c2: 109.2 },
            { name: "Vilho Palosaari", country: "FIN", isoCode: "fi", t1: 59.5, t2: 54.3, q: 101.2, c1: 105.7, c2: 0 },
            { name: "Benjamin Oestvold", country: "NOR", isoCode: "no", t1: 70.7, t2: 60.0, q: 100.1, c1: 107.0, c2: 0 },
            { name: "Jules Chervet", country: "FRA", isoCode: "fr", t1: 58.8, t2: 54.0, q: 99.9, c1: 104.0, c2: 0 },
            { name: "Vitaliy Kalinichenko", country: "UKR", isoCode: "ua", t1: 48.5, t2: 54.8, q: 99.7, c1: 97.6, c2: 0 },
            { name: "Danil Vassilyev", country: "KAZ", isoCode: "kz", t1: 54.6, t2: 51.9, q: 99.7, c1: 105.2, c2: 0 },
            { name: "Karl Geiger", country: "GER", isoCode: "de", t1: 53.4, t2: 44.2, q: 99.0, c1: 97.6, c2: 0 },
            { name: "Aleksander Zniszczo?", country: "POL", isoCode: "pl", t1: 62.1, t2: 48.5, q: 98.7, c1: 107.8, c2: 0 },
            { name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", t1: 0, t2: 52.2, q: 98.4, c1: 100.0, c2: 0 },
            { name: "Simon Ammann", country: "SUI", isoCode: "ch", t1: 0, t2: 57.0, q: 98.0, c1: 106.8, c2: 0 },
            { name: "Hektor Kapustik", country: "SVK", isoCode: "sk", t1: 50.0, t2: 40.5, q: 97.9, c1: 99.6, c2: 0 },
            { name: "Piotr ?y?a", country: "POL", isoCode: "pl", t1: 62.9, t2: 56.7, q: 97.6, c1: 106.5, c2: 0 },
            { name: "Domen Prevc", country: "SLO", isoCode: "si", t1: 70.8, t2: 68.5, q: 97.6, c1: 113.6, c2: 117.1 },
            { name: "Mackenzie Boyd-Clowes", country: "CAN", isoCode: "ca", t1: 56.0, t2: 50.2, q: 97.4, c1: 104.5, c2: 0 },
            { name: "Andrew Urlaub", country: "USA", isoCode: "us", t1: 63.1, t2: 60.9, q: 97.2, c1: 108.1, c2: 106.7 },
            { name: "Alex Insam", country: "ITA", isoCode: "it", t1: 52.2, t2: 48.1, q: 97.1, c1: 96.5, c2: 0 },
            { name: "Vladimir Zografski", country: "BUL", isoCode: "bg", t1: 62.9, t2: 59.4, q: 96.8, c1: 119.9, c2: 114.8 },
            { name: "Juri Kesseli", country: "SUI", isoCode: "ch", t1: 61.9, t2: 49.4, q: 96.3, c1: 99.5, c2: 0 },
            { name: "Ilja Miziernykh", country: "KAZ", isoCode: "kz", t1: 45.8, t2: 42.6, q: 95.1, c1: 0, c2: 0 },
            { name: "Kevin Bickner", country: "USA", isoCode: "us", t1: 54.8, t2: 48.5, q: 94.8, c1: 0, c2: 0 },
            { name: "Valentin Foubert", country: "FRA", isoCode: "fr", t1: 68.4, t2: 63.7, q: 94.3, c1: 0, c2: 0 },
            { name: "Francesco Cecon", country: "ITA", isoCode: "it", t1: 58.3, t2: 52.1, q: 92.3, c1: 0, c2: 0 },
            { name: "Giovanni Bresadola", country: "ITA", isoCode: "it", t1: 54.1, t2: 51.4, q: 91.7, c1: 0, c2: 0 },
            { name: "Louis Obersteiner", country: "AUT", isoCode: "at", t1: 42.7, t2: 42.0, q: 91.4, c1: 0, c2: 0 },
            { name: "Lovro Kos", country: "SLO", isoCode: "si", t1: 53.0, t2: 50.2, q: 89.2, c1: 0, c2: 0 },
            { name: "Daniel Andrei Cacina", country: "ROU", isoCode: "ro", t1: 51.9, t2: 46.2, q: 89.0, c1: 0, c2: 0 },
            { name: "Fatih Arda Ipcioglu", country: "TUR", isoCode: "tr", t1: 49.4, t2: 40.6, q: 88.8, c1: 0, c2: 0 },
            { name: "Roman Koudelka", country: "CZE", isoCode: "cz", t1: 54.8, t2: 50.6, q: 88.8, c1: 0, c2: 0 },
            { name: "Kasperi Valto", country: "FIN", isoCode: "fi", t1: 50.7, t2: 44.9, q: 87.9, c1: 0, c2: 0 },
            { name: "Yevhen Marusiak", country: "UKR", isoCode: "ua", t1: 39.5, t2: 39.3, q: 85.6, c1: 0, c2: 0 },
            { name: "Yixin Lyu", country: "CHN", isoCode: "cn", t1: 45.3, t2: 43.5, q: 83.4, c1: 0, c2: 0 },
            { name: "Mihnea Alexandru Spulber", country: "ROU", isoCode: "ro", t1: 47.0, t2: 40.4, q: 82.4, c1: 0, c2: 0 },
            { name: "Muhammed Ali Bedir", country: "TUR", isoCode: "tr", t1: 40.9, t2: 36.7, q: 80.2, c1: 0, c2: 0 },
            { name: "Weijie Zhen", country: "CHN", isoCode: "cn", t1: 36.3, t2: 34.6, q: 80.1, c1: 0, c2: 0 },
            { name: "Svyatoslav Nazarenko", country: "KAZ", isoCode: "kz", t1: 43.2, t2: 38.0, q: 78.8, c1: 0, c2: 0 },
            { name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", t1: 73.2, t2: 68.6, q: 0, c1: 0, c2: 0 }
        ];
        
        // --- DANE FALUN HS 132 (26.11.2025) - Zaktualizowane z protoko?u ---
        // Nazwiska znormalizowane (Imi? Nazwisko) + dodane wyniki T1 i T2 z 26.11
        const FALUN_HS132_DATA = [
           { name: "Anze Lanisek", country: "SLO", isoCode: "si", t1: 101.5, t2: 82.9, q: 128.1, q_dist: 126.0, q_note: 55.0, q_comp: 2.3, c1: 131.6, c1_dist: 129.0, c1_note: 55.5, c1_comp: -0.1, c2: 131.3, c2_dist: 128.5, c2_note: 56.0, c2_comp: 0.0 },
           { name: "Stephan Embacher", country: "AUT", isoCode: "at", t1: 93.8, t2: 76.8, q: 131.3, q_dist: 131.0, q_note: 55.0, q_comp: -3.5, c1: 127.2, c1_dist: 128.5, c1_note: 55.5, c1_comp: -3.6, c2: 132.7, c2_dist: 129.0, c2_note: 56.0, c2_comp: 0.5 },
           { name: "Domen Prevc", country: "SLO", isoCode: "si", t1: 0, t2: 85.4, q: 112.1, q_dist: 121.5, q_note: 47.0, q_comp: 2.4, c1: 129.2, c1_dist: 129.0, c1_note: 52.0, c1_comp: 1.0, c2: 129.5, c2_dist: 129.0, c2_note: 55.0, c2_comp: -1.7 },
           { name: "Daniel Tschofenig", country: "AUT", isoCode: "at", t1: 91.6, t2: 63.2, q: 122.6, q_dist: 123.5, q_note: 54.0, q_comp: 2.3, c1: 126.2, c1_dist: 127.0, c1_note: 56.0, c1_comp: -2.4, c2: 130.4, c2_dist: 129.0, c2_note: 55.5, c2_comp: -1.3 },
           { name: "Jan Hoerl", country: "AUT", isoCode: "at", t1: 99.0, t2: 66.4, q: 120.8, q_dist: 122.5, q_note: 53.5, q_comp: 2.8, c1: 125.8, c1_dist: 125.0, c1_note: 54.0, c1_comp: 2.8, c2: 126.4, c2_dist: 126.5, c2_note: 54.0, c2_comp: 0.7 },
           { name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", t1: 0, t2: 71.7, q: 126.5, q_dist: 125.5, q_note: 54.0, q_comp: 2.6, c1: 124.8, c1_dist: 127.5, c1_note: 55.0, c1_comp: -3.7, c2: 125.1, c2_dist: 127.5, c2_note: 55.0, c2_comp: -3.4 },
           { name: "Manuel Fettner", country: "AUT", isoCode: "at", t1: 95.5, t2: 0, q: 121.5, q_dist: 126.0, q_note: 52.5, q_comp: -1.8, c1: 127.7, c1_dist: 128.0, c1_note: 53.5, c1_comp: -0.2, c2: 121.5, c2_dist: 123.5, c2_note: 54.0, c2_comp: 1.2 },
           { name: "Ren Nikaido", country: "JPN", isoCode: "jp", t1: 83.9, t2: 0, q: 119.1, q_dist: 125.0, q_note: 54.0, q_comp: -3.9, c1: 129.4, c1_dist: 130.0, c1_note: 55.0, c1_comp: -3.6, c2: 119.7, c2_dist: 124.5, c2_note: 54.5, c2_comp: -2.9 },
           { name: "Stefan Kraft", country: "AUT", isoCode: "at", t1: 84.5, t2: 66.8, q: 117.3, q_dist: 121.0, q_note: 54.0, q_comp: 1.5, c1: 136.9, c1_dist: 133.0, c1_note: 57.0, c1_comp: -3.5, c2: 106.1, c2_dist: 119.0, c2_note: 54.0, c2_comp: -6.1 },
           { name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", t1: 87.9, t2: 64.2, q: 117.1, q_dist: 125.5, q_note: 50.5, q_comp: -3.3, c1: 121.2, c1_dist: 128.0, c1_note: 52.0, c1_comp: -5.2, c2: 118.4, c2_dist: 125.5, c2_note: 52.5, c2_comp: -4.0 },
           { name: "Philipp Raimund", country: "GER", isoCode: "de", t1: 87.2, t2: 68.2, q: 124.9, q_dist: 125.0, q_note: 53.0, q_comp: 2.9, c1: 123.1, c1_dist: 125.5, c1_note: 54.0, c1_comp: 0.1, c2: 115.9, c2_dist: 125.5, c2_note: 52.0, c2_comp: -6.0 },
           { name: "Felix Hoffmann", country: "GER", isoCode: "de", t1: 93.8, t2: 72.7, q: 123.1, q_dist: 124.0, q_note: 53.5, q_comp: 2.4, c1: 123.8, c1_dist: 128.5, c1_note: 50.0, c1_comp: 0.1, c2: 113.9, c2_dist: 121.0, c2_note: 52.5, c2_comp: -4.2 },
           { name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", t1: 77.6, t2: 62.7, q: 117.3, q_dist: 124.0, q_note: 52.5, q_comp: -2.4, c1: 117.6, c1_dist: 124.5, c1_note: 53.5, c1_comp: -4.0, c2: 117.5, c2_dist: 124.5, c2_note: 54.0, c2_comp: 0.4 },
           { name: "Pius Paschke", country: "GER", isoCode: "de", t1: 73.4, t2: 63.1, q: 113.1, q_dist: 123.5, q_note: 52.5, q_comp: -5.7, c1: 119.8, c1_dist: 121.0, c1_note: 53.0, c1_comp: 5.0, c2: 114.7, c2_dist: 123.0, c2_note: 53.0, c2_comp: -3.7 },
           { name: "Kacper Tomasiak", country: "POL", isoCode: "pl", t1: 79.9, t2: 61.6, q: 111.9, q_dist: 121.0, q_note: 52.5, q_comp: -2.4, c1: 117.2, c1_dist: 121.0, c1_note: 52.5, c1_comp: 2.9, c2: 117.1, c2_dist: 124.5, c2_note: 53.5, c2_comp: 0.4 },
           { name: "Kamil Stoch", country: "POL", isoCode: "pl", t1: 0, t2: 0, q: 119.3, q_dist: 124.0, q_note: 55.0, q_comp: -2.9, c1: 116.5, c1_dist: 122.5, c1_note: 53.0, c1_comp: -1.0, c2: 117.3, c2_dist: 125.5, c2_note: 52.5, c2_comp: -5.1 },
           { name: "Naoki Nakamura", country: "JPN", isoCode: "jp", t1: 0, t2: 67.9, q: 112.8, q_dist: 122.0, q_note: 53.5, q_comp: -4.3, c1: 118.6, c1_dist: 124.5, c1_note: 53.0, c1_comp: 0.2, c2: 112.9, c2_dist: 122.5, c2_note: 54.0, c2_comp: -5.6 },
           { name: "Marius Lindvik", country: "NOR", isoCode: "no", t1: 87.5, t2: 70.9, q: 108.6, q_dist: 121.0, q_note: 51.0, q_comp: -4.2, c1: 122.3, c1_dist: 125.5, c1_note: 54.0, c1_comp: -1.6, c2: 107.1, c2_dist: 122.0, c2_note: 51.5, c2_comp: -8.0 },
           { name: "Valentin Foubert", country: "FRA", isoCode: "fr", t1: 64.1, t2: 53.4, q: 108.3, q_dist: 119.5, q_note: 51.5, q_comp: -2.3, c1: 111.9, c1_dist: 122.0, c1_note: 52.5, c1_comp: 0.4, c2: 116.3, c2_dist: 124.0, c2_note: 53.0, c2_comp: 0.4 },
           { name: "Johann Andre Forfang", country: "NOR", isoCode: "no", t1: 87.8, t2: 70.3, q: 107.9, q_dist: 119.5, q_note: 51.0, q_comp: -2.2, c1: 117.2, c1_dist: 121.0, c1_note: 52.5, c1_comp: -0.2, c2: 110.8, c2_dist: 121.5, c2_note: 52.5, c2_comp: -4.4 },
           { name: "Rok Oblak", country: "SLO", isoCode: "si", t1: 77.3, t2: 63.5, q: 112.8, q_dist: 121.5, q_note: 52.5, q_comp: -2.4, c1: 117.7, c1_dist: 123.0, c1_note: 54.0, c1_comp: 0.2, c2: 108.7, c2_dist: 120.0, c2_note: 52.0, c2_comp: -3.3 },
           { name: "Tomofumi Naito", country: "JPN", isoCode: "jp", t1: 69.0, t2: 57.4, q: 110.5, q_dist: 121.0, q_note: 52.0, q_comp: -3.3, c1: 115.6, c1_dist: 122.0, c1_note: 52.0, c1_comp: 0.0, c2: 110.5, c2_dist: 122.5, c2_note: 51.5, c2_comp: 0.5 },
           { name: "Jason Colby", country: "USA", isoCode: "us", t1: 75.8, t2: 62.2, q: 114.6, q_dist: 123.5, q_note: 53.5, q_comp: -5.2, c1: 112.7, c1_dist: 117.5, c1_note: 51.5, c1_comp: 5.7, c2: 110.8, c2_dist: 122.0, c2_note: 53.5, c2_comp: -6.3 },
           { name: "Vladimir Zografski", country: "BUL", isoCode: "bg", t1: 81.0, t2: 66.8, q: 109.8, q_dist: 121.0, q_note: 51.0, q_comp: -3.0, c1: 113.0, c1_dist: 120.0, c1_note: 52.5, c1_comp: 0.0, c2: 109.0, c2_dist: 121.5, c2_note: 53.0, c2_comp: 0.6 },
           { name: "Maximilian Ortner", country: "AUT", isoCode: "at", t1: 78.4, t2: 61.7, q: 112.5, q_dist: 122.5, q_note: 52.0, q_comp: -4.0, c1: 110.0, c1_dist: 120.0, c1_note: 51.5, c1_comp: -1.5, c2: 111.1, c2_dist: 122.0, c2_note: 52.5, c2_comp: -5.0 },
           { name: "Artti Aigro", country: "EST", isoCode: "ee", t1: 75.9, t2: 64.7, q: 117.3, q_dist: 124.5, q_note: 54.0, q_comp: -4.8, c1: 112.3, c1_dist: 121.5, c1_note: 52.5, c1_comp: 0.3, c2: 106.6, c2_dist: 120.5, c2_note: 51.5, c2_comp: 0.5 },
           { name: "Yukiya Sato", country: "JPN", isoCode: "jp", t1: 63.3, t2: 52.8, q: 113.1, q_dist: 123.0, q_note: 51.0, q_comp: -3.3, c1: 110.6, c1_dist: 119.5, c1_note: 51.0, c1_comp: 0.5, c2: 107.4, c2_dist: 121.5, c2_note: 51.0, c2_comp: -6.3 },
           { name: "Dawid Kubacki", country: "POL", isoCode: "pl", t1: 71.9, t2: 61.1, q: 103.1, q_dist: 118.0, q_note: 51.5, q_comp: -4.8, c1: 109.7, c1_dist: 119.0, c1_note: 52.5, c1_comp: 0.1, c2: 107.7, c2_dist: 120.5, c2_note: 52.5, c2_comp: 0.5 },
           { name: "Piotr ?y?a", country: "POL", isoCode: "pl", t1: 74.0, t2: 51.3, q: 97.0, q_dist: 116.0, q_note: 49.5, q_comp: -5.3, c1: 109.8, c1_dist: 119.0, c1_note: 51.0, c1_comp: 0.0, c2: 106.8, c2_dist: 121.5, c2_note: 51.0, c2_comp: 0.6 },
           { name: "Kevin Bickner", country: "USA", isoCode: "us", t1: 61.1, t2: 48.7, q: 99.8, q_dist: 116.5, q_note: 49.0, q_comp: -2.9, c1: 112.5, c1_dist: 122.5, c1_note: 51.5, c1_comp: -3.5, c2: 102.3, c2_dist: 119.0, c2_note: 49.5, c2_comp: -5.4 },
           // --- ODPADLI PO 1. SERII (FALUN 26.11) ---
           { name: "Pawe? W?sek", country: "POL", isoCode: "pl", t1: 73.6, t2: 53.2, q: 107.8, q_dist: 118.0, q_note: 52.0, q_comp: -0.6, c1: 109.3, c1_dist: 118.5, c1_note: 52.0, c1_comp: 0.0, c2: 0 },
           { name: "Sandro Hauswirth", country: "SUI", isoCode: "ch", t1: 69.1, t2: 55.3, q: 112.6, q_dist: 121.5, q_note: 50.5, q_comp: -0.6, c1: 108.5, c1_dist: 118.5, c1_note: 51.5, c1_comp: -0.3, c2: 0 },
           { name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", t1: 65.6, t2: 56.3, q: 107.0, q_dist: 120.5, q_note: 52.5, q_comp: -6.4, c1: 107.6, c1_dist: 117.5, c1_note: 51.0, c1_comp: 1.1, c2: 0 },
           { name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", t1: 74.3, t2: 54.8, q: 111.9, q_dist: 120.5, q_note: 52.5, q_comp: -1.5, c1: 107.5, c1_dist: 117.5, c1_note: 51.5, c1_comp: 0.5, c2: 0 },
           { name: "Felix Trunz", country: "SUI", isoCode: "ch", t1: 74.2, t2: 59.6, q: 105.5, q_dist: 118.5, q_note: 51.0, q_comp: -2.8, c1: 107.1, c1_dist: 121.5, c1_note: 52.0, c1_comp: -7.6, c2: 0 },
           { name: "Simon Ammann", country: "SUI", isoCode: "ch", t1: 76.9, t2: 0, q: 105.4, q_dist: 119.0, q_note: 49.5, q_comp: -2.3, c1: 106.6, c1_dist: 118.5, c1_note: 49.5, c1_comp: -0.2, c2: 0 },
           { name: "Antti Aalto", country: "FIN", isoCode: "fi", t1: 79.0, t2: 61.5, q: 108.1, q_dist: 119.0, q_note: 52.0, q_comp: -2.1, c1: 106.2, c1_dist: 119.0, c1_note: 51.5, c1_comp: -3.5, c2: 0 },
           { name: "Andrew Urlaub", country: "USA", isoCode: "us", t1: 59.2, t2: 51.8, q: 97.6, q_dist: 114.0, q_note: 49.5, q_comp: -1.1, c1: 104.1, c1_dist: 117.0, c1_note: 50.5, c1_comp: -1.0, c2: 0 },
           { name: "Lovro Kos", country: "SLO", isoCode: "si", t1: 76.1, t2: 42.9, q: 112.1, q_dist: 123.0, q_note: 52.5, q_comp: -5.8, c1: 102.9, c1_dist: 119.5, c1_note: 50.0, c1_comp: -6.2, c2: 0 },
           { name: "Andreas Wellinger", country: "GER", isoCode: "de", t1: 68.9, t2: 51.8, q: 107.0, q_dist: 118.5, q_note: 51.5, q_comp: -1.8, c1: 100.6, c1_dist: 115.5, c1_note: 51.0, c1_comp: -2.3, c2: 0 },
           { name: "Karl Geiger", country: "GER", isoCode: "de", t1: 65.8, t2: 50.9, q: 99.2, q_dist: 114.0, q_note: 50.0, q_comp: 0.0, c1: 100.3, c1_dist: 115.0, c1_note: 50.5, c1_comp: -1.2, c2: 0 },
           { name: "Vitaliy Kalinichenko", country: "UKR", isoCode: "ua", t1: 58.8, t2: 43.2, q: 102.0, q_dist: 117.5, q_note: 47.5, q_comp: -1.0, c1: 99.8, c1_dist: 114.0, c1_note: 49.5, c1_comp: 1.1, c2: 0 },
           { name: "Roman Koudelka", country: "CZE", isoCode: "cz", t1: 69.6, t2: 0, q: 101.6, q_dist: 115.0, q_note: 51.5, q_comp: -0.9, c1: 99.2, c1_dist: 117.5, c1_note: 52.0, c1_comp: -8.3, c2: 0 },
           { name: "Louis Obersteiner", country: "AUT", isoCode: "at", t1: 49.4, t2: 42.4, q: 96.7, q_dist: 113.5, q_note: 50.5, q_comp: -2.1, c1: 97.4, c1_dist: 114.0, c1_note: 50.0, c1_comp: -1.8, c2: 0 },
           { name: "Hektor Kapustik", country: "SVK", isoCode: "sk", t1: 61.5, t2: 41.9, q: 94.1, q_dist: 113.0, q_note: 49.5, q_comp: -2.8, c1: 95.7, c1_dist: 113.5, c1_note: 50.0, c1_comp: -2.6, c2: 0 },
           { name: "Benjamin Oestvold", country: "NOR", isoCode: "no", t1: 78.3, t2: 60.0, q: 106.1, q_dist: 119.5, q_note: 49.5, q_comp: -2.5, c1: 94.6, c1_dist: 112.5, c1_note: 49.5, c1_comp: -1.4, c2: 0 },
           { name: "Ilja Miziernykh", country: "KAZ", isoCode: "kz", t1: 54.8, t2: 36.9, q: 100.0, q_dist: 113.0, q_note: 50.0, q_comp: 2.6, c1: 93.2, c1_dist: 109.5, c1_note: 49.0, c1_comp: 3.1, c2: 0 },
           { name: "Juri Kesseli", country: "SUI", isoCode: "ch", t1: 59.1, t2: 45.0, q: 95.9, q_dist: 116.5, q_note: 46.0, q_comp: -3.8, c1: 92.4, c1_dist: 111.0, c1_note: 48.0, c1_comp: 0.6, c2: 0 },
           { name: "Mackenzie Boyd-Clowes", country: "CAN", isoCode: "ca", t1: 67.0, t2: 49.4, q: 96.4, q_dist: 114.5, q_note: 49.5, q_comp: -3.2, c1: 90.6, c1_dist: 113.0, c1_note: 49.5, c1_comp: -6.3, c2: 0 },
           { name: "Danil Vassilyev", country: "KAZ", isoCode: "kz", t1: 57.5, t2: 52.0, q: 107.2, q_dist: 119.5, q_note: 51.0, q_comp: -2.9, c1: 82.7, c1_dist: 105.0, c1_note: 45.5, c1_comp: 4.2, c2: 0 },
           
           // --- POZOSTALI (Nie startowali w konkursie / Odpadli w Q) ---
           { name: "Timi Zajc", country: "SLO", isoCode: "si", t1: 79.1, t2: 61.1, q: 94.0, q_dist: 111.0, q_note: 50.0, q_comp: 0.2 },
           { name: "Tate Frantz", country: "USA", isoCode: "us", t1: 75.5, t2: 53.3, q: 93.9, q_dist: 113.5, q_note: 49.5, q_comp: -3.9 },
           { name: "Jules Chervet", country: "FRA", isoCode: "fr", t1: 69.1, t2: 48.1, q: 92.3, q_dist: 114.5, q_note: 49.0, q_comp: -6.8 },
           { name: "Erik Belshaw", country: "USA", isoCode: "us", t1: 69.0, t2: 51.4, q: 92.0, q_dist: 109.5, q_note: 49.0, q_comp: 1.9 },
           { name: "Aleksander Zniszczo?", country: "POL", isoCode: "pl", t1: 66.2, t2: 42.1, q: 91.4, q_dist: 111.0, q_note: 49.0, q_comp: -1.4 },
           { name: "Francesco Cecon", country: "ITA", isoCode: "it", t1: 58.5, t2: 43.8, q: 91.3, q_dist: 111.5, q_note: 49.5, q_comp: -2.9 },
           { name: "Giovanni Bresadola", country: "ITA", isoCode: "it", t1: 61.3, t2: 41.9, q: 91.0, q_dist: 110.5, q_note: 48.5, q_comp: -0.4 },
           { name: "Vilho Palosaari", country: "FIN", isoCode: "fi", t1: 65.3, t2: 52.8, q: 90.5, q_dist: 111.0, q_note: 49.0, q_comp: -2.3 },
           { name: "Fatih Arda Ipcioglu", country: "TUR", isoCode: "tr", t1: 63.4, t2: 40.4, q: 86.4, q_dist: 110.5, q_note: 48.0, q_comp: -4.5 },
           { name: "Kasperi Valto", country: "FIN", isoCode: "fi", t1: 48.7, t2: 35.4, q: 85.8, q_dist: 110.5, q_note: 48.0, q_comp: -5.1 },
           { name: "Alex Insam", country: "ITA", isoCode: "it", t1: 58.7, t2: 43.2, q: 85.3, q_dist: 106.5, q_note: 48.5, q_comp: 1.1 },
           { name: "Yevhen Marusiak", country: "UKR", isoCode: "ua", t1: 61.7, t2: 46.7, q: 83.7, q_dist: 109.0, q_note: 46.0, q_comp: -2.5 },
           { name: "Daniel Andrei Cacina", country: "ROU", isoCode: "ro", t1: 50.5, t2: 33.0, q: 80.7, q_dist: 107.0, q_note: 45.0, q_comp: 0.9 },
           { name: "Yixin Lyu", country: "CHN", isoCode: "cn", t1: 36.3, t2: 23.5, q: 71.5, q_dist: 102.5, q_note: 46.5, q_comp: -3.5 },
           { name: "Mihnea Alexandru Spulber", country: "ROU", isoCode: "ro", t1: 32.2, t2: 20.1, q: 71.5, q_dist: 100.0, q_note: 46.5, q_comp: 1.0 },
           { name: "Muhammed Ali Bedir", country: "TUR", isoCode: "tr", t1: 39.9, t2: 24.3, q: 70.7, q_dist: 101.5, q_note: 48.0, q_comp: -4.0 },
           { name: "Svyatoslav Nazarenko", country: "KAZ", isoCode: "kz", t1: 40.9, t2: 15.7, q: 66.3, q_dist: 101.5, q_note: 44.5, q_comp: 4.9 },
           { name: "Weijie Zhen", country: "CHN", isoCode: "cn", t1: 33.8, t2: 27.5, q: 0 }
        ];

        // --- DANE ZAWODNIK¨®W P? 2024/25 (Stare dane) ---
        const WC_2425_DATA = [
            { rank: 1, name: "Daniel Tschofenig", country: "AUT", isoCode: "at", points: 1805 },
            { rank: 2, name: "Jan Hoerl", country: "AUT", isoCode: "at", points: 1652 },
            { rank: 3, name: "Stefan Kraft", country: "AUT", isoCode: "at", points: 1290 },
            { rank: 4, name: "Anze Lanisek", country: "SLO", isoCode: "si", points: 1056 },
            { rank: 5, name: "Pius Paschke", country: "GER", isoCode: "de", points: 1006 },
            { rank: 6, name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", points: 996 },
            { rank: 7, name: "Andreas Wellinger", country: "GER", isoCode: "de", points: 989 },
            { rank: 8, name: "Johann Andre Forfang", country: "NOR", isoCode: "no", points: 955 },
            { rank: 9, name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", points: 910 },
            { rank: 10, name: "Domen Prevc", country: "SLO", isoCode: "si", points: 776 },
            { rank: 11, name: "Maximilian Ortner", country: "AUT", isoCode: "at", points: 726 },
            { rank: 12, name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", points: 678 },
            { rank: 13, name: "Karl Geiger", country: "GER", isoCode: "de", points: 638 },
            { rank: 14, name: "Pawe? W?sek", country: "POL", isoCode: "pl", points: 612 },
            { rank: 15, name: "Michael Hayboeck", country: "AUT", isoCode: "at", points: 587 },
            { rank: 16, name: "Timi Zajc", country: "SLO", isoCode: "si", points: 572 },
            { rank: 17, name: "Marius Lindvik", country: "NOR", isoCode: "no", points: 474 },
            { rank: 18, name: "Manuel Fettner", country: "AUT", isoCode: "at", points: 458 },
            { rank: 19, name: "Ren Nikaido", country: "JPN", isoCode: "jp", points: 444 },
            { rank: 20, name: "Aleksander Zniszczo?", country: "POL", isoCode: "pl", points: 267 },
            { rank: 20, name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", points: 267 },
            { rank: 22, name: "Tate Frantz", country: "USA", isoCode: "us", points: 266 },
            { rank: 23, name: "Artti Aigro", country: "EST", isoCode: "ee", points: 245 },
            { rank: 24, name: "Philipp Raimund", country: "GER", isoCode: "de", points: 242 },
            { rank: 25, name: "Naoki Nakamura", country: "JPN", isoCode: "jp", points: 212 },
            { rank: 26, name: "Benjamin Oestvold", country: "NOR", isoCode: "no", points: 211 },
            { rank: 27, name: "Valentin Foubert", country: "FRA", isoCode: "fr", points: 173 },
            { rank: 28, name: "Kevin Bickner", country: "USA", isoCode: "us", points: 171 },
            { rank: 29, name: "Vladimir Zografski", country: "BUL", isoCode: "bg", points: 165 },
            { rank: 30, name: "Lovro Kos", country: "SLO", isoCode: "si", points: 158 },
            { rank: 31, name: "Kamil Stoch", country: "POL", isoCode: "pl", points: 157 },
            { rank: 31, name: "Markus Mueller", country: "AUT", isoCode: "at", points: 157 },
            { rank: 33, name: "Killian Peier", country: "SUI", isoCode: "ch", points: 132 },
            { rank: 34, name: "Fredrik Villumstad", country: "NOR", isoCode: "no", points: 127 },
            { rank: 35, name: "Dawid Kubacki", country: "POL", isoCode: "pl", points: 122 },
            { rank: 36, name: "Antti Aalto", country: "FIN", isoCode: "fi", points: 116 },
            { rank: 37, name: "Jakub Wolny", country: "POL", isoCode: "pl", points: 111 },
            { rank: 38, name: "Markus Eisenbichler", country: "GER", isoCode: "de", points: 88 },
            { rank: 39, name: "Piotr ?y?a", country: "POL", isoCode: "pl", points: 80 },
            { rank: 40, name: "Yevhen Marusiak", country: "UKR", isoCode: "ua", points: 76 },
            { rank: 40, name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", points: 76 },
            { rank: 42, name: "Stephan Embacher", country: "AUT", isoCode: "at", points: 72 },
            { rank: 42, name: "Stephan Leyhe", country: "GER", isoCode: "de", points: 72 },
            { rank: 44, name: "Yukiya Sato", country: "JPN", isoCode: "jp", points: 69 },
            { rank: 45, name: "Zak Mogel", country: "SLO", isoCode: "si", points: 59 },
            { rank: 46, name: "Alex Insam", country: "ITA", isoCode: "it", points: 55 },
            { rank: 47, name: "Robin Pedersen", country: "NOR", isoCode: "no", points: 47 },
            { rank: 48, name: "Robert Johansson", country: "NOR", isoCode: "no", points: 32 },
            { rank: 49, name: "Niko Kytosaho", country: "FIN", isoCode: "fi", points: 28 },
            { rank: 50, name: "Felix Hoffmann", country: "GER", isoCode: "de", points: 27 }
        ];

        // --- DANE ZAWODNIK¨®W P? 2025/26 (ZAKTUALIZOWANE NA PODSTAWIE ZDJ?CIA) ---
        const WC_2526_DATA = [
            { rank: 1, name: "Stefan Kraft", country: "AUT", isoCode: "at", points: 205 },
            { rank: 2, name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", points: 181 },
            { rank: 3, name: "Daniel Tschofenig", country: "AUT", isoCode: "at", points: 176 },
            { rank: 4, name: "Jan Hoerl", country: "AUT", isoCode: "at", points: 157 },
            { rank: 5, name: "Anze Lanisek", country: "SLO", isoCode: "si", points: 156 },
            { rank: 6, name: "Philipp Raimund", country: "GER", isoCode: "de", points: 150 },
            { rank: 6, name: "Domen Prevc", country: "SLO", isoCode: "si", points: 150 },
            { rank: 8, name: "Felix Hoffmann", country: "GER", isoCode: "de", points: 118 },
            { rank: 9, name: "Stephan Embacher", country: "AUT", isoCode: "at", points: 103 },
            { rank: 10, name: "Ren Nikaido", country: "JPN", isoCode: "jp", points: 61 },
            { rank: 11, name: "Manuel Fettner", country: "AUT", isoCode: "at", points: 59 },
            { rank: 11, name: "Timi Zajc", country: "SLO", isoCode: "si", points: 59 },
            { rank: 13, name: "Kamil Stoch", country: "POL", isoCode: "pl", points: 58 },
            { rank: 13, name: "Vladimir Zografski", country: "BUL", isoCode: "bg", points: 58 },
            { rank: 15, name: "Marius Lindvik", country: "NOR", isoCode: "no", points: 55 },
            { rank: 16, name: "Artti Aigro", country: "EST", isoCode: "ee", points: 45 },
            { rank: 16, name: "Naoki Nakamura", country: "JPN", isoCode: "jp", points: 45 },
            { rank: 18, name: "Kacper Tomasiak", country: "POL", isoCode: "pl", points: 44 },
            { rank: 19, name: "Maximilian Ortner", country: "AUT", isoCode: "at", points: 36 },
            { rank: 20, name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", points: 30 },
            { rank: 21, name: "Antti Aalto", country: "FIN", isoCode: "fi", points: 28 },
            { rank: 22, name: "Valentin Foubert", country: "FRA", isoCode: "fr", points: 21 },
            { rank: 23, name: "Dawid Kubacki", country: "POL", isoCode: "pl", points: 20 },
            { rank: 24, name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", points: 17 },
            { rank: 24, name: "Pius Paschke", country: "GER", isoCode: "de", points: 17 },
            { rank: 26, name: "Jason Colby", country: "USA", isoCode: "us", points: 15 },
            { rank: 27, name: "Piotr ?y?a", country: "POL", isoCode: "pl", points: 12 },
            { rank: 27, name: "Andreas Wellinger", country: "GER", isoCode: "de", points: 12 },
            { rank: 27, name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", points: 12 },
            { rank: 30, name: "Rok Oblak", country: "SLO", isoCode: "si", points: 10 },
            { rank: 31, name: "Karl Geiger", country: "GER", isoCode: "de", points: 8 },
            { rank: 32, name: "Pawe? W?sek", country: "POL", isoCode: "pl", points: 7 },
            { rank: 32, name: "Johann Andre Forfang", country: "NOR", isoCode: "no", points: 7 },
            { rank: 34, name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", points: 6 },
            { rank: 35, name: "Andrew Urlaub", country: "USA", isoCode: "us", points: 5 },
            { rank: 36, name: "Benjamin Oestvold", country: "NOR", isoCode: "no", points: 4 },
            { rank: 37, name: "Tate Frantz", country: "USA", isoCode: "us", points: 3 },
            { rank: 38, name: "Yukiya Sato", country: "JPN", isoCode: "jp", points: 2 },
            { rank: 38, name: "Juri Kesseli", country: "SUI", isoCode: "ch", points: 2 },
            { rank: 40, name: "Tomofumi Naito", country: "JPN", isoCode: "jp", points: 1 }
        ];

        // --- DANE LGP 2025 ---
        const LGP_2025_DATA = [
            { name: "Philipp Raimund", country: "GER", isoCode: "de", points: 490 },
            { name: "Sakutaro Kobayashi", country: "JPN", isoCode: "jp", points: 392 },
            { name: "Niklas Bachlinger", country: "AUT", isoCode: "at", points: 391 }, 
            { name: "Ryoyu Kobayashi", country: "JPN", isoCode: "jp", points: 356 },
            { name: "Kamil Stoch", country: "POL", isoCode: "pl", points: 319 },
            { name: "Naoki Nakamura", country: "JPN", isoCode: "jp", points: 315 },
            { name: "Dawid Kubacki", country: "POL", isoCode: "pl", points: 306 },
            { name: "Jan Hoerl", country: "AUT", isoCode: "at", points: 284 },
            { name: "Daniel Tschofenig", country: "AUT", isoCode: "at", points: 276 },
            { name: "Ren Nikaido", country: "JPN", isoCode: "jp", points: 230 },
            { name: "Maciej Kot", country: "POL", isoCode: "pl", points: 211 },
            { name: "Piotr ?y?a", country: "POL", isoCode: "pl", points: 200 },
            { name: "Gregor Deschwanden", country: "SUI", isoCode: "ch", points: 187 },
            { name: "Lovro Kos", country: "SLO", isoCode: "si", points: 184 },
            { name: "Yukiya Sato", country: "JPN", isoCode: "jp", points: 156 },
            { name: "Ziga Jancar", country: "SLO", isoCode: "si", points: 156 },
            { name: "Stephan Embacher", country: "AUT", isoCode: "at", points: 154 },
            { name: "Marius Lindvik", country: "NOR", isoCode: "no", points: 150 },
            { name: "Danil Vassilyev", country: "KAZ", isoCode: "kz", points: 130 },
            { name: "Vladimir Zografski", country: "BUL", isoCode: "bg", points: 127 },
            { name: "Aleksander Zniszczo?", country: "POL", isoCode: "pl", points: 120 },
            { name: "Stefan Kraft", country: "AUT", isoCode: "at", points: 120 },
            { name: "Domen Prevc", country: "SLO", isoCode: "si", points: 118 },
            { name: "Juri Kesseli", country: "SUI", isoCode: "ch", points: 115 },
            { name: "Maximilian Ortner", country: "AUT", isoCode: "at", points: 112 },
            { name: "Luca Roth", country: "GER", isoCode: "de", points: 106 },
            { name: "Simon Ammann", country: "SUI", isoCode: "ch", points: 99 },
            { name: "Anze Lanisek", country: "SLO", isoCode: "si", points: 97 },
            { name: "Valentin Foubert", country: "FRA", isoCode: "fr", points: 96 },
            { name: "Felix Hoffmann", country: "GER", isoCode: "de", points: 81 },
            { name: "Manuel Fettner", country: "AUT", isoCode: "at", points: 80 },
            { name: "Clemens Leitner", country: "AUT", isoCode: "at", points: 72 },
            { name: "Pius Paschke", country: "GER", isoCode: "de", points: 70 },
            { name: "Johann Andre Forfang", country: "NOR", isoCode: "no", points: 65 },
            { name: "Hektor Kapustik", country: "SVK", isoCode: "sk", points: 61 },
            { name: "Jason Colby", country: "USA", isoCode: "us", points: 61 },
            { name: "Timi Zajc", country: "SLO", isoCode: "si", points: 61 },
            { name: "Giovanni Bresadola", country: "ITA", isoCode: "it", points: 60 },
            { name: "Jonas Schuster", country: "AUT", isoCode: "at", points: 59 },
            { name: "Andreas Wellinger", country: "GER", isoCode: "de", points: 58 },
            { name: "Felix Trunz", country: "SUI", isoCode: "ch", points: 58 },
            { name: "Roman Koudelka", country: "CZE", isoCode: "cz", points: 54 },
            { name: "Artti Aigro", country: "EST", isoCode: "ee", points: 47 },
            { name: "Halvor Egner Granerud", country: "NOR", isoCode: "no", points: 45 },
            { name: "Julian Smid", country: "AUT", isoCode: "at", points: 44 },
            { name: "Clemens Aigner", country: "AUT", isoCode: "at", points: 42 },
            { name: "Vilho Palosaari", country: "FIN", isoCode: "fi", points: 41 },
            { name: "Yanick Wasser", country: "SUI", isoCode: "ch", points: 40 },
            { name: "Zak Mogel", country: "SLO", isoCode: "si", points: 40 },
            { name: "Killian Peier", country: "SUI", isoCode: "ch", points: 40 },
            { name: "Enej Faletic", country: "SLO", isoCode: "si", points: 40 },
            { name: "Tate Frantz", country: "USA", isoCode: "us", points: 38 },
            { name: "Andrew Urlaub", country: "USA", isoCode: "us", points: 36 },
            { name: "Kristoffer E. Sundal", country: "NOR", isoCode: "no", points: 34 },
            { name: "Ziga Jelar", country: "SLO", isoCode: "si", points: 33 },
            { name: "Mackenzie Boyd-Clowes", country: "CAN", isoCode: "ca", points: 33 },
            { name: "Kacper Tomasiak", country: "POL", isoCode: "pl", points: 32 },
            { name: "Pawe? W?sek", country: "POL", isoCode: "pl", points: 30 },
            { name: "Antti Aalto", country: "FIN", isoCode: "fi", points: 30 },
            { name: "Sandro Hauswirth", country: "SUI", isoCode: "ch", points: 30 },
            { name: "Karl Geiger", country: "GER", isoCode: "de", points: 29 },
            { name: "Kacper Juroszek", country: "POL", isoCode: "pl", points: 18 },
            { name: "Jakub Wolny", country: "POL", isoCode: "pl", points: 15 },
        ];

        // Definicja event¨®w (kolumn) dla Lillehammer
        const LILLEHAMMER_EVENTS = {
            t1: { id: 't1', label: "T1 (Pt)", full: "1. Trening", color: "text-slate-500", group: "training" },
            t2: { id: 't2', label: "T2 (Pt)", full: "2. Trening", color: "text-slate-500", group: "training" },
            m1: { id: 'm1', label: "M1 (Mix)", full: "Mikst (1. Seria)", color: "text-purple-600", group: "mix" },
            m2: { id: 'm2', label: "M2 (Mix)", full: "Mikst (Fina?)", color: "text-purple-600", group: "mix" },
            q1: { id: 'q1', label: "Q (Sob)", full: "Kwalifikacje Sobota", color: "text-blue-600", group: "quali" },
            c1_1: { id: 'c1_1', label: "C1-1 (Sob)", full: "Konkurs Sobota (1. Seria)", color: "text-blue-700 font-bold", group: "comp" },
            c1_2: { id: 'c1_2', label: "C1-2 (Sob)", full: "Konkurs Sobota (Fina?)", color: "text-blue-700 font-bold", group: "comp" },
            q2: { id: 'q2', label: "Q (Ndz)", full: "Kwalifikacje Niedziela", color: "text-blue-600", group: "quali" },
            c2_1: { id: 'c2_1', label: "C2-1 (Ndz)", full: "Konkurs Niedziela (1. Seria)", color: "text-blue-700 font-bold", group: "comp" },
            c2_2: { id: 'c2_2', label: "C2-2 (Ndz)", full: "Konkurs Niedziela (Fina?)", color: "text-blue-700 font-bold", group: "comp" },
        };

        const FALUN_EVENTS = {
            t1: { id: 't1', label: "T1 (Wt)", full: "1. Trening", color: "text-slate-500", group: "training" },
            t2: { id: 't2', label: "T2 (Wt)", full: "2. Trening", color: "text-slate-500", group: "training" },
            q:  { id: 'q',  label: "Q (Wt)",  full: "Kwalifikacje", color: "text-blue-600", group: "quali" },
            c1: { id: 'c1', label: "C1 (Wt)", full: "Konkurs (1. Seria)", color: "text-blue-700 font-bold", group: "comp" },
            c2: { id: 'c2', label: "C2 (Wt)", full: "Konkurs (Fina?)", color: "text-blue-700 font-bold", group: "comp" },
        };

        const FALUN_HS132_EVENTS = {
            t1: { id: 't1', label: "T1 (?r)", full: "1. Trening", color: "text-slate-500", group: "training" },
            t2: { id: 't2', label: "T2 (?r)", full: "2. Trening", color: "text-slate-500", group: "training" },
            q:  { id: 'q',  label: "Q (?r)",  full: "Kwalifikacje", color: "text-blue-600", group: "quali" },
            c1: { id: 'c1', label: "C1 (?r)", full: "Konkurs (1. Seria)", color: "text-blue-700 font-bold", group: "comp" },
            c2: { id: 'c2', label: "C2 (?r)", full: "Konkurs (Fina?)", color: "text-blue-700 font-bold", group: "comp" },
        };

        // Zdefiniuj eventy dla po??czonego widoku, prefiksuj?c je aby unikn?? konflikt¨®w
        const ALL_COMPETITIONS_EVENTS = {
            // Lillehammer
            lille_t1: { id: 'lille_t1', label: "Lil T1", full: "Lillehammer - 1. Trening", color: "text-slate-500", group: "lillehammer" },
            lille_t2: { id: 'lille_t2', label: "Lil T2", full: "Lillehammer - 2. Trening", color: "text-slate-500", group: "lillehammer" },
            lille_m1: { id: 'lille_m1', label: "Lil M1", full: "Lillehammer - Mikst (1. Seria)", color: "text-purple-600", group: "lillehammer" },
            lille_m2: { id: 'lille_m2', label: "Lil M2", full: "Lillehammer - Mikst (Fina?)", color: "text-purple-600", group: "lillehammer" },
            lille_q1: { id: 'lille_q1', label: "Lil Q1", full: "Lillehammer - Kwalifikacje Sob", color: "text-blue-600", group: "lillehammer" },
            lille_c1_1: { id: 'lille_c1_1', label: "Lil C1-1", full: "Lillehammer - Konkurs Sob (1. Seria)", color: "text-blue-700 font-bold", group: "lillehammer" },
            lille_c1_2: { id: 'lille_c1_2', label: "Lil C1-2", full: "Lillehammer - Konkurs Sob (Fina?)", color: "text-blue-700 font-bold", group: "lillehammer" },
            lille_q2: { id: 'lille_q2', label: "Lil Q2", full: "Lillehammer - Kwalifikacje Ndz", color: "text-blue-600", group: "lillehammer" },
            lille_c2_1: { id: 'lille_c2_1', label: "Lil C2-1", full: "Lillehammer - Konkurs Ndz (1. Seria)", color: "text-blue-700 font-bold", group: "lillehammer" },
            lille_c2_2: { id: 'lille_c2_2', label: "Lil C2-2", full: "Lillehammer - Konkurs Ndz (Fina?)", color: "text-blue-700 font-bold", group: "lillehammer" },
            
            // Falun HS 95
            falun_t1: { id: 'falun_t1', label: "Fal 95 T1", full: "Falun HS95 - 1. Trening", color: "text-slate-500", group: "falun" },
            falun_t2: { id: 'falun_t2', label: "Fal 95 T2", full: "Falun HS95 - 2. Trening", color: "text-slate-500", group: "falun" },
            falun_q: { id: 'falun_q', label: "Fal 95 Q", full: "Falun HS95 - Kwalifikacje", color: "text-blue-600", group: "falun" },
            falun_c1: { id: 'falun_c1', label: "Fal 95 C1", full: "Falun HS95 - Konkurs (1. Seria)", color: "text-blue-700 font-bold", group: "falun" },
            falun_c2: { id: 'falun_c2', label: "Fal 95 C2", full: "Falun HS95 - Konkurs (Fina?)", color: "text-blue-700 font-bold", group: "falun" },

            // Falun HS 132
            falun132_t1: { id: 'falun132_t1', label: "Fal 132 T1", full: "Falun HS132 - 1. Trening", color: "text-slate-500", group: "falun_132" },
            falun132_t2: { id: 'falun132_t2', label: "Fal 132 T2", full: "Falun HS132 - 2. Trening", color: "text-slate-500", group: "falun_132" },
            falun132_q: { id: 'falun132_q', label: "Fal 132 Q", full: "Falun HS132 - Kwalifikacje", color: "text-blue-600", group: "falun_132" },
            falun132_c1: { id: 'falun132_c1', label: "Fal 132 C1", full: "Falun HS132 - Konkurs (1. Seria)", color: "text-blue-700 font-bold", group: "falun_132" },
            falun132_c2: { id: 'falun132_c2', label: "Fal 132 C2", full: "Falun HS132 - Konkurs (Fina?)", color: "text-blue-700 font-bold", group: "falun_132" },
        };

        // KONFIGURACJA ZAWOD¨®W
        const EVENTS_CONFIG = {
            lillehammer: {
                label: "Lillehammer HS 140 (K-123) - 23.11.2025",
                data: LILLEHAMMER_DATA,
                columns: LILLEHAMMER_EVENTS,
                defaultCols: ['c1_1', 'c1_2', 'c2_1', 'c2_2']
            },
            falun: {
                label: "Falun HS 95 (K-90) - 25.11.2025",
                data: FALUN_DATA,
                columns: FALUN_EVENTS,
                defaultCols: ['c1', 'c2']
            },
            falun_hs132: {
                label: "Falun HS 132 (K-120) - 26.11.2025",
                data: FALUN_HS132_DATA,
                columns: FALUN_HS132_EVENTS,
                defaultCols: ['t1', 't2', 'q', 'c1', 'c2']
            }
        };

        // Lista zawodnik¨®w wybranych w Fantasy Draft
        const DRAFT_PLAYERS = [
            "Stefan Kraft", "Philipp Raimund", "Felix Hoffmann", "Sakutaro Kobayashi", "Antti Aalto", "Artti Aigro",
            "Manuel Fettner", "Pius Paschke", "Anze Lanisek", "Kamil Stoch", "Ryoyu Kobayashi",
            "Jan Hoerl", "Timi Zajc", "Marius Lindvik", "Dawid Kubacki", "Ren Nikaido",
            "Daniel Tschofenig", "Stephan Embacher", "Andreas Wellinger", "Domen Prevc", "Gregor Deschwanden", "Kacper Tomasiak",
            "Johann Andre Forfang", "Naoki Nakamura"
        ];

        const calculateDraftPointsFromMap = (skierMap, sortKey) => {
            const sorted = Object.values(skierMap)
                .filter(s => s[sortKey] > 0)
                .sort((a, b) => b[sortKey] - a[sortKey]);

            let currentRank = 1;
            let rankCounter = 1;
            let lastVal = null;

            const ranked = sorted.map((item) => {
                let val = item[sortKey];
                if (lastVal !== null && val !== lastVal) {
                    currentRank = rankCounter;
                }
                lastVal = val;
                rankCounter++;
                return { ...item, computedRank: currentRank };
            });

            const draftPointsMap = {};
            ranked.forEach(item => {
                const points = item.computedRank <= 30 ? (31 - item.computedRank) : 0;
                draftPointsMap[item.name] = points;
            });
            
            return draftPointsMap;
        };

        function SkiJumpingApp() {
            const [activeTab, setActiveTab] = useState('results'); // 'results', 'wc2425', 'wc2526', 'lgp2025', 'all_competitions'
            const [activeEventId, setActiveEventId] = useState('lillehammer'); 
            
            const [minJumps, setMinJumps] = useState(0);
            const [searchTerm, setSearchTerm] = useState("");
            const [sortBy, setSortBy] = useState('customSum'); 
            const [sortDirection, setSortDirection] = useState('desc');
            const [showDraftHighlight, setShowDraftHighlight] = useState(true);
            const [onlyDraft, setOnlyDraft] = useState(false);
            const [draftMode, setDraftMode] = useState('sunday'); 
            const [showDraftColumn, setShowDraftColumn] = useState(false);
            const [showBestNColumn, setShowBestNColumn] = useState(false);
            
            // STATE FOR SELECTIONS PER EVENT
            const [selectionsByEvent, setSelectionsByEvent] = useState({
                lillehammer: EVENTS_CONFIG.lillehammer.defaultCols,
                falun: EVENTS_CONFIG.falun.defaultCols,
                falun_hs132: EVENTS_CONFIG.falun_hs132.defaultCols
            });

            // State for combined view
            const [selectedAllColumns, setSelectedAllColumns] = useState([
                'lille_c1_1', 'lille_c1_2', 'lille_c2_1', 'lille_c2_2',
                'falun_c1', 'falun_c2', 'falun132_c1', 'falun132_c2'
            ]);
            const [expandedGroups, setExpandedGroups] = useState({
                lillehammer: true,
                falun: true,
                falun_132: true
            });

            const [bestN, setBestN] = useState(10);

            const currentEventConfig = EVENTS_CONFIG[activeEventId];
            const ALL_EVENT_KEYS = Object.keys(currentEventConfig.columns);
            const ALL_COMP_KEYS = Object.keys(ALL_COMPETITIONS_EVENTS);

            // Use selections from state instead of direct config default
            const selectedColumns = selectionsByEvent[activeEventId];

            const activePlayersSet = useMemo(() => {
                const set = new Set();
                if (activeTab === 'results') {
                    const currentData = EVENTS_CONFIG[activeEventId].data;
                    currentData.forEach(p => {
                        const hasPoints = Object.keys(EVENTS_CONFIG[activeEventId].columns).some(key => p[key] > 0);
                        if(hasPoints) set.add(p.name);
                    });
                } else if (activeTab === 'all_competitions') {
                    [...LILLEHAMMER_DATA, ...FALUN_DATA, ...FALUN_HS132_DATA].forEach(p => set.add(p.name));
                }
                set.add("Wasiljew Dani?");
                set.add("Danil Vassilyev");
                return set;
            }, [activeEventId, activeTab]);

            const isPlayerActive = (name) => {
                if (activePlayersSet.has(name)) return true;
                if (name === "Danil Vassilyev" && activePlayersSet.has("Wasiljew Dani?")) return true;
                if (name === "Wasiljew Dani?" && activePlayersSet.has("Danil Vassilyev")) return true;
                return false;
            };

            // Reset sort when changing tabs
            useEffect(() => {
                if (activeTab === 'results' || activeTab === 'all_competitions') {
                    setSortBy('customSum'); 
                } else {
                    setSortBy('points'); 
                }
                setSortDirection('desc');
            }, [activeTab]);

            const toggleColumn = (key) => {
                if (activeTab === 'all_competitions') {
                    if (selectedAllColumns.includes(key)) {
                        setSelectedAllColumns(prev => prev.filter(k => k !== key));
                    } else {
                        setSelectedAllColumns(prev => [...prev, key]);
                    }
                } else {
                    setSelectionsByEvent(prev => {
                        const currentSelections = prev[activeEventId];
                        const newSelections = currentSelections.includes(key) 
                            ? currentSelections.filter(k => k !== key)
                            : [...currentSelections, key];
                        return { ...prev, [activeEventId]: newSelections };
                    });
                }
            };

            const toggleGroupExpand = (grp) => {
                setExpandedGroups(prev => ({...prev, [grp]: !prev[grp]}));
            }

            const selectGroup = (groupName) => {
                if (activeTab === 'all_competitions') {
                    if (groupName === 'none') {
                        setSelectedAllColumns([]);
                        return;
                    }
                    // groupName here corresponds to 'lillehammer' or 'falun'
                    const groupKeys = Object.values(ALL_COMPETITIONS_EVENTS)
                        .filter(e => e.group === groupName)
                        .map(e => e.id);
                    
                    const allSelected = groupKeys.every(k => selectedAllColumns.includes(k));
                    if (allSelected) {
                        setSelectedAllColumns(prev => prev.filter(k => !groupKeys.includes(k)));
                    } else {
                        // Add missing keys
                        const newSet = new Set([...selectedAllColumns, ...groupKeys]);
                        setSelectedAllColumns(Array.from(newSet));
                    }
                } else {
                    // Single Event Logic
                    const currentCols = currentEventConfig.columns;
                    let newSelections = [];

                    if (groupName === 'none') {
                        newSelections = [];
                    } else if (groupName === 'all') {
                        newSelections = Object.keys(currentCols);
                    } else {
                        // Specific sub-group like 'training', 'comp'
                        const groupKeys = Object.values(currentCols).filter(e => e.group === groupName).map(e => e.id);
                        const currentSelections = selectionsByEvent[activeEventId];
                        const allSelected = groupKeys.every(k => currentSelections.includes(k));
                        
                        if (allSelected) {
                            newSelections = currentSelections.filter(k => !groupKeys.includes(k));
                        } else {
                            const set = new Set([...currentSelections, ...groupKeys]);
                            newSelections = Array.from(set);
                        }
                    }
                    setSelectionsByEvent(prev => ({ ...prev, [activeEventId]: newSelections }));
                }
            };

            // Auto-sort effects
            useEffect(() => {
                if (activeTab === 'results' || activeTab === 'all_competitions') {
                    setSortBy('bestNSum');
                    setSortDirection('desc');
                }
            }, [bestN, activeTab]);

            useEffect(() => {
                if (activeTab === 'results' || activeTab === 'all_competitions') {
                    setSortBy('customSum');
                    setSortDirection('desc');
                }
            }, [selectedColumns, selectedAllColumns, activeTab]);

            const processedData = useMemo(() => {
                if (activeTab === 'all_competitions') {
                    // --- MERGE LOGIC ---
                    const allPlayerNames = new Set([...LILLEHAMMER_DATA.map(p => p.name), ...FALUN_DATA.map(p => p.name), ...FALUN_HS132_DATA.map(p => p.name)]);
                    const skiersMap = {};

                    allPlayerNames.forEach(name => {
                        const lilleData = LILLEHAMMER_DATA.find(p => p.name === name) || {};
                        const falunData = FALUN_DATA.find(p => p.name === name) || {};
                        const falun132Data = FALUN_HS132_DATA.find(p => p.name === name) || {};
                        
                        const country = lilleData.country || falunData.country || falun132Data.country || "N/A";
                        const isoCode = lilleData.isoCode || falunData.isoCode || falun132Data.isoCode || "xx";

                        const merged = {
                            name, country, isoCode,
                            lille_t1: lilleData.t1 || 0, lille_t2: lilleData.t2 || 0,
                            lille_m1: lilleData.m1 || 0, lille_m2: lilleData.m2 || 0,
                            lille_q1: lilleData.q1 || 0, lille_c1_1: lilleData.c1_1 || 0,
                            lille_c1_2: lilleData.c1_2 || 0, lille_q2: lilleData.q2 || 0,
                            lille_c2_1: lilleData.c2_1 || 0, lille_c2_2: lilleData.c2_2 || 0,
                            falun_t1: falunData.t1 || 0, falun_t2: falunData.t2 || 0,
                            falun_q: falunData.q || 0, falun_c1: falunData.c1 || 0,
                            falun_c2: falunData.c2 || 0,
                            falun132_t1: falun132Data.t1 || 0, falun132_t2: falun132Data.t2 || 0,
                            falun132_q: falun132Data.q || 0, falun132_c1: falun132Data.c1 || 0,
                            falun132_c2: falun132Data.c2 || 0,
                            
                            // Preserve detailed data for falun132 - Updated names to match ID
                            falun132_q_dist: falun132Data.q_dist, falun132_q_note: falun132Data.q_note, falun132_q_comp: falun132Data.q_comp,
                            falun132_c1_dist: falun132Data.c1_dist, falun132_c1_note: falun132Data.c1_note, falun132_c1_comp: falun132Data.c1_comp,
                            falun132_c2_dist: falun132Data.c2_dist, falun132_c2_note: falun132Data.c2_note, falun132_c2_comp: falun132Data.c2_comp
                        };
                        skiersMap[name] = merged;
                    });

                    return Object.values(skiersMap).map(skier => {
                        let totalPoints = 0;
                        let seriesCount = 0;
                        let scores = [];
                        let customSum = 0;
                        const isDraft = DRAFT_PLAYERS.includes(skier.name);

                        ALL_COMP_KEYS.forEach(key => {
                            const points = skier[key] || 0;
                            if (points > 0) {
                                totalPoints += points;
                                seriesCount += 1;
                                scores.push({ key, points });
                            }
                        });

                        selectedAllColumns.forEach(key => {
                            customSum += (skier[key] || 0);
                        });

                        const sortedScores = [...scores].sort((a, b) => b.points - a.points);
                        const bestNSum = sortedScores.slice(0, bestN).reduce((sum, item) => sum + item.points, 0);

                        return {
                            ...skier,
                            totalPoints: parseFloat(totalPoints.toFixed(1)),
                            seriesCount,
                            customSum: parseFloat(customSum.toFixed(1)),
                            bestNSum: parseFloat(bestNSum.toFixed(1)),
                            isDraft,
                            draftTotal: 0
                        };
                    });

                } else {
                    // Single Event Logic
                    const rawData = currentEventConfig.data;
                    const skiersMap = {};
                    
                    rawData.forEach(skier => {
                        let satTotal = 0;
                        let sunTotal = 0;
                        if (activeEventId === 'lillehammer') {
                            satTotal = (skier.c1_1 || 0) + (skier.c1_2 || 0);
                            sunTotal = (skier.c2_1 || 0) + (skier.c2_2 || 0);
                        } else if (activeEventId === 'falun' || activeEventId === 'falun_hs132') {
                            sunTotal = (skier.c1 || 0) + (skier.c2 || 0);
                        }
                        skiersMap[skier.name] = { ...skier, satTotal, sunTotal };
                    });

                    const satDraftPoints = calculateDraftPointsFromMap(skiersMap, 'satTotal');
                    const sunDraftPoints = calculateDraftPointsFromMap(skiersMap, 'sunTotal');

                    return Object.values(skiersMap).map(skier => {
                        let totalPoints = 0;
                        let seriesCount = 0;
                        let scores = [];
                        let customSum = 0;
                        const isDraft = DRAFT_PLAYERS.includes(skier.name);

                        ALL_EVENT_KEYS.forEach(key => {
                            const points = skier[key] || 0;
                            if (points > 0) {
                                totalPoints += points;
                                seriesCount += 1;
                                scores.push({ key, points });
                            }
                        });

                        selectedColumns.forEach(key => {
                            customSum += (skier[key] || 0);
                        });

                        const sortedScores = [...scores].sort((a, b) => b.points - a.points);
                        const bestNSum = sortedScores.slice(0, bestN).reduce((sum, item) => sum + item.points, 0);
                        const avgPoints = seriesCount > 0 ? (totalPoints / seriesCount).toFixed(1) : 0;

                        const draftPtsSat = satDraftPoints[skier.name] || 0;
                        const draftPtsSun = sunDraftPoints[skier.name] || 0;
                        let draftTotal = (draftMode === 'weekend') ? (draftPtsSat + draftPtsSun) : draftPtsSun;

                        return {
                            ...skier,
                            totalPoints: parseFloat(totalPoints.toFixed(1)),
                            seriesCount,
                            avgPoints: parseFloat(avgPoints),
                            customSum: parseFloat(customSum.toFixed(1)),
                            bestNSum: parseFloat(bestNSum.toFixed(1)),
                            isDraft,
                            draftTotal,
                            draftPtsSat,
                            draftPtsSun
                        };
                    });
                }
            }, [selectedColumns, selectedAllColumns, bestN, draftMode, activeEventId, currentEventConfig, activeTab]);

            const processExternalData = (data) => {
                return data.map(skier => {
                    const isDraft = DRAFT_PLAYERS.includes(skier.name);
                    const isActive = isPlayerActive(skier.name);
                    return { ...skier, isDraft, isActive };
                });
            };

            const processedWC2425Data = useMemo(() => processExternalData(WC_2425_DATA), [activePlayersSet]);
            const processedWC2526Data = useMemo(() => processExternalData(WC_2526_DATA), [activePlayersSet]);
            const processedLGPData = useMemo(() => processExternalData(LGP_2025_DATA), [activePlayersSet]);

            const getFilteredData = (data, isExternal = false) => {
                let filtered = data.filter(skier => {
                    const matchesSearch = skier.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                          skier.country.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesDraft = onlyDraft ? skier.isDraft : true;
                    if (isExternal) return matchesSearch && matchesDraft;
                    if (activeTab === 'all_competitions') return matchesSearch && matchesDraft && (skier.seriesCount >= minJumps);
                    return matchesSearch && matchesDraft && skier.seriesCount >= minJumps;
                });

                filtered.sort((a, b) => {
                    let valA = a[sortBy] ?? 0;
                    let valB = b[sortBy] ?? 0;
                    if (sortDirection === 'asc') return valA - valB;
                    return valB - valA;
                });

                let currentRank = 1;
                let rankCounter = 1;
                let lastVal = null;

                return filtered.map((item) => {
                    let val = item[sortBy];
                    if (lastVal !== null && val !== lastVal) {
                        currentRank = rankCounter;
                    }
                    lastVal = val;
                    rankCounter++;
                    return { ...item, displayRank: currentRank };
                });
            };

            let displayData = [];
            let activeTabTitle = "";
            
            if (activeTab === 'results' || activeTab === 'all_competitions') {
                displayData = getFilteredData(processedData);
            } else if (activeTab === 'wc2425') {
                displayData = getFilteredData(processedWC2425Data, true);
                activeTabTitle = "Puchar ?wiata 2024/25";
            } else if (activeTab === 'wc2526') {
                displayData = getFilteredData(processedWC2526Data, true);
                activeTabTitle = "Puchar ?wiata 2025/26";
            } else if (activeTab === 'lgp2025') {
                displayData = getFilteredData(processedLGPData, true);
                activeTabTitle = "Letnie Grand Prix 2025";
            }

            const handleSort = (key) => {
                if (sortBy === key) {
                    setSortDirection(prev => prev === 'desc' ? 'asc' : 'desc');
                } else {
                    setSortBy(key);
                    setSortDirection('desc');
                }
            };

            const getRowStyle = (skier) => {
                if (activeTab !== 'results' && activeTab !== 'all_competitions' && !skier.isActive) {
                    return "bg-red-100 border-red-300 text-red-900 hover:bg-red-200 transition-colors font-medium";
                }
                if (showDraftHighlight && skier.isDraft) {
                    return "bg-indigo-100 border-indigo-300 hover:bg-indigo-200 transition-colors shadow-sm relative z-10";
                }
                return "hover:bg-slate-50 transition-colors bg-white";
            };

            const getRankBadgeStyle = (rank) => {
                if (sortBy === 'seriesCount' || sortBy === 'name') return "bg-white border-slate-200 text-slate-600";
                if (rank === 1) return "bg-yellow-100 border-yellow-400 text-yellow-800";
                if (rank === 2) return "bg-slate-100 border-slate-300 text-slate-700";
                if (rank === 3) return "bg-orange-100 border-orange-300 text-orange-800";
                return "bg-white border-slate-200 text-slate-600";
            };

            return (
                <div className="min-h-screen bg-slate-50 p-2 md:p-4 font-sans text-slate-900">
                    <header className="max-w-[1600px] mx-auto mb-4 md:mb-6 bg-white rounded-2xl shadow-sm border border-slate-200 p-4 md:p-6 relative overflow-hidden">
                        <div className="absolute top-0 right-0 p-4 opacity-10">
                            <Snowflake size={80} className="md:w-[120px] md:h-[120px]" />
                        </div>
                        <div className="relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <div>
                                <div className="flex items-center gap-2 md:gap-3 mb-2">
                                    <span className="px-2 py-0.5 md:px-3 md:py-1 bg-blue-600 text-white text-[10px] md:text-xs font-bold rounded-full tracking-wider uppercase">Sezon 2025/26</span>
                                    <span className="text-slate-500 text-xs md:text-sm font-medium flex items-center gap-1">
                                        <Calendar size={14} /> 21-26 Listopada 2025
                                    </span>
                                </div>
                                <h1 className="text-2xl md:text-3xl font-extrabold text-slate-900 mb-1 leading-tight">
                                    Skoki Narciarskie 2025
                                </h1>
                                <p className="text-slate-500 text-xs md:text-sm max-w-xl">
                                    Pe?ne zestawienie wynik¨®w z wyr¨®?nieniem Fantasy Draft.
                                </p>
                            </div>
                        </div>

                        <div className="flex gap-2 mt-6 border-b border-slate-100 pb-1 overflow-x-auto no-scrollbar">
                            <button 
                                onClick={() => setActiveTab('results')}
                                className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-all flex items-center gap-2 whitespace-nowrap ${activeTab === 'results' ? 'bg-slate-100 text-blue-600 border-b-2 border-blue-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Snowflake size={16}/> Wyniki
                            </button>
                            <button 
                                onClick={() => setActiveTab('all_competitions')}
                                className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-all flex items-center gap-2 whitespace-nowrap ${activeTab === 'all_competitions' ? 'bg-slate-100 text-blue-600 border-b-2 border-blue-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Trophy size={16}/> Wszystkie Konkursy
                            </button>
                            <button 
                                onClick={() => setActiveTab('wc2526')}
                                className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-all flex items-center gap-2 whitespace-nowrap ${activeTab === 'wc2526' ? 'bg-slate-100 text-blue-600 border-b-2 border-blue-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Globe size={16}/> P? 25/26
                            </button>
                             <button 
                                onClick={() => setActiveTab('wc2425')}
                                className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-all flex items-center gap-2 whitespace-nowrap ${activeTab === 'wc2425' ? 'bg-slate-100 text-blue-600 border-b-2 border-blue-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Globe size={16}/> P? 24/25
                            </button>
                            <button 
                                onClick={() => setActiveTab('lgp2025')}
                                className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-all flex items-center gap-2 whitespace-nowrap ${activeTab === 'lgp2025' ? 'bg-slate-100 text-orange-600 border-b-2 border-orange-600' : 'text-slate-400 hover:text-slate-600'}`}
                            >
                                <Sun size={16}/> Letnie GP 2025
                            </button>
                        </div>
                    </header>

                    <div className="max-w-[1600px] mx-auto mb-4 grid grid-cols-1 lg:grid-cols-12 gap-4">
                        <div className="lg:col-span-3 space-y-3">
                           
                           {activeTab === 'results' && (
                                <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                                    <div className="flex items-center gap-2 mb-2 text-slate-400 text-xs font-bold uppercase">
                                        <MapPin size={14}/> Wybierz Zawody
                                    </div>
                                    <div className="relative">
                                        <select 
                                            value={activeEventId}
                                            onChange={(e) => setActiveEventId(e.target.value)}
                                            className="w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 font-bold text-sm rounded-lg py-2 px-3 pr-8 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"
                                        >
                                            <option value="lillehammer">Lillehammer HS 140 (K-123)</option>
                                            <option value="falun">Falun HS 95 (K-90)</option>
                                            <option value="falun_hs132">Falun HS 132 (K-120)</option>
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-700">
                                            <ChevronDown size={16} />
                                        </div>
                                    </div>
                                    <div className="mt-2 text-[10px] text-slate-400 text-center font-mono">
                                        {currentEventConfig.label}
                                    </div>
                                </div>
                           )}

                           <div className="bg-gradient-to-br from-indigo-50 to-blue-50 p-3 rounded-xl border border-indigo-200 shadow-sm">
                                <div className="flex items-center gap-2 mb-3 text-indigo-800 text-xs font-bold uppercase">
                                    <Star size={14} fill="currentColor" /> Fantasy Draft
                                </div>
                                <div className="space-y-2">
                                    <label className="flex items-center gap-2 cursor-pointer p-2 bg-white/60 rounded-lg hover:bg-white transition-colors">
                                        <div className={`w-4 h-4 border rounded flex items-center justify-center ${showDraftHighlight ? 'bg-indigo-600 border-indigo-700' : 'border-slate-300 bg-white'}`}>
                                            {showDraftHighlight && <CheckSquare size={12} className="text-white" />}
                                        </div>
                                        <input type="checkbox" className="hidden" checked={showDraftHighlight} onChange={() => setShowDraftHighlight(!showDraftHighlight)} />
                                        <span className="text-sm font-medium text-slate-700">Wyr¨®?nij graczy (Niebieski)</span>
                                    </label>

                                    <button 
                                        onClick={() => setOnlyDraft(!onlyDraft)}
                                        className={`w-full text-left flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all ${onlyDraft ? 'bg-indigo-600 text-white shadow-sm' : 'bg-white/60 text-slate-700 hover:bg-white'}`}
                                    >
                                        <Users size={14} />
                                        <span className="text-sm font-bold">{onlyDraft ? 'Pokazujesz tylko Draft' : 'Poka? tylko Draft'}</span>
                                    </button>

                                    {activeTab === 'results' && (
                                        <>
                                            <div className="pt-2 border-t border-indigo-100 mt-2">
                                                <div className="text-[10px] text-indigo-400 font-bold uppercase mb-1">Widoczno??:</div>
                                                <label className="flex items-center gap-2 cursor-pointer p-2 bg-white/60 rounded-lg hover:bg-white transition-colors">
                                                    <div className={`w-4 h-4 border rounded flex items-center justify-center ${showDraftColumn ? 'bg-indigo-600 border-indigo-700' : 'border-slate-300 bg-white'}`}>
                                                        {showDraftColumn && <CheckSquare size={12} className="text-white" />}
                                                    </div>
                                                    <input type="checkbox" className="hidden" checked={showDraftColumn} onChange={() => setShowDraftColumn(!showDraftColumn)} />
                                                    <span className="text-sm font-medium text-slate-700 flex items-center gap-1">
                                                       {showDraftColumn ? <Eye size={14}/> : <EyeOff size={14}/>} Poka? kolumn? Pkt Draft
                                                    </span>
                                                </label>
                                            </div>
                                            <div className="pt-2 border-t border-indigo-100 mt-2">
                                                <div className="text-[10px] text-indigo-400 font-bold uppercase mb-1">Tryb oblicze¨½ Draftu:</div>
                                                <div className="flex bg-white rounded-lg p-1 border border-indigo-100">
                                                    <button onClick={() => setDraftMode('sunday')} className={`flex-1 py-1 text-[10px] font-bold rounded transition-all ${draftMode === 'sunday' ? 'bg-indigo-100 text-indigo-700' : 'text-slate-400'}`}>Niedz/G?¨®wny</button>
                                                    <button onClick={() => setDraftMode('weekend')} className={`flex-1 py-1 text-[10px] font-bold rounded transition-all ${draftMode === 'weekend' ? 'bg-indigo-100 text-indigo-700' : 'text-slate-400'}`}>Weekend</button>
                                                </div>
                                            </div>
                                        </>
                                    )}
                                </div>
                           </div>

                           <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                                <div className="flex items-center gap-2 mb-2 text-slate-400 text-xs font-bold uppercase">
                                    <Search size={14}/> Szukaj
                                </div>
                                <input 
                                    type="text" 
                                    placeholder="Nazwisko lub kraj (np. POL)..." 
                                    className="w-full bg-slate-50 border border-slate-200 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                           </div>

                           {(activeTab === 'results' || activeTab === 'all_competitions') && (
                             <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                                    <div className="flex items-center gap-2 mb-2 text-slate-400 text-xs font-bold uppercase">
                                        <Filter size={14}/> Min. zaliczonych serii
                                    </div>
                                    <div className="flex flex-wrap gap-1">
                                       {[0, 5, 6, 7, 8, 9, 10].map(num => (
                                            <button 
                                                key={num}
                                                onClick={() => setMinJumps(num)}
                                                className={`flex-1 px-2 py-1.5 rounded-md text-xs font-bold transition-all ${minJumps === num ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}
                                            >
                                                {num === 0 ? 'Wszyscy' : num}
                                            </button>
                                       ))}
                                    </div>
                             </div>
                           )}
                        </div>

                        <div className="lg:col-span-9">
                            {(activeTab === 'results' || activeTab === 'all_competitions') ? (
                                <div className="bg-white rounded-xl border border-blue-200 shadow-sm p-4 relative overflow-hidden h-full">
                                   <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-purple-500"></div>
                                   <div className="flex items-center gap-2 mb-4">
                                        <Calculator className="text-blue-600" size={20} />
                                        <h2 className="font-bold text-slate-800">Kreator Rankingu {activeTab === 'all_competitions' ? 'Zbiorczego' : ''}</h2>
                                   </div>

                                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                             <div className="text-xs font-bold text-slate-500 uppercase mb-2 flex justify-between items-center">
                                                    <span>Wybierz serie do sumowania:</span>
                                                    <div className="flex gap-2 scale-90 origin-right">
                                                         <button onClick={() => selectGroup('none')} className="text-slate-400 hover:underline">Odznacz wszystko</button>
                                                    </div>
                                             </div>
                                             
                                             {/* R¨®?NE WIDOKI SELEKTOR¨®W ZALE?NIE OD ZAK?ADKI */}
                                             {activeTab === 'all_competitions' ? (
                                                <div className="space-y-3 h-48 overflow-y-auto pr-2">
                                                    {['lillehammer', 'falun', 'falun_132'].map(grp => (
                                                        <div key={grp} className="border-b border-slate-100 pb-2">
                                                            <button onClick={() => toggleGroupExpand(grp)} className="w-full flex justify-between items-center mb-1 hover:bg-slate-50 p-1 rounded">
                                                                <div className="text-[10px] font-bold text-slate-600 uppercase flex items-center gap-1">
                                                                    {expandedGroups[grp] ? <ChevronDown size={12}/> : <ChevronRight size={12}/>} 
                                                                    {grp}
                                                                </div>
                                                                <span onClick={(e) => {e.stopPropagation(); selectGroup(grp)}} className="text-[10px] text-blue-500 hover:underline cursor-pointer">Zaznacz</span>
                                                            </button>
                                                            
                                                            {expandedGroups[grp] && (
                                                                <div className="flex flex-wrap gap-1.5 pl-2">
                                                                    {Object.values(ALL_COMPETITIONS_EVENTS).filter(e => e.group === grp).map(evt => {
                                                                        const isSelected = selectedAllColumns.includes(evt.id);
                                                                        return (
                                                                            <button
                                                                                key={evt.id}
                                                                                onClick={() => toggleColumn(evt.id)}
                                                                                className={`px-2 py-1 rounded text-[10px] font-bold border transition-all flex items-center gap-1 ${isSelected ? 'bg-blue-50 border-blue-300 text-blue-700' : 'bg-white border-slate-200 text-slate-400'}`}
                                                                                title={evt.full}
                                                                            >
                                                                                {isSelected ? <CheckSquare size={10}/> : <Square size={10}/>}
                                                                                {evt.label}
                                                                            </button>
                                                                        )
                                                                    })}
                                                                </div>
                                                            )}
                                                        </div>
                                                    ))}
                                                </div>
                                             ) : (
                                                 <div className="flex flex-wrap gap-1.5">
                                                        {ALL_EVENT_KEYS.map(key => {
                                                             const evt = currentEventConfig.columns[key];
                                                             const isSelected = selectedColumns.includes(key);
                                                             return (
                                                                    <button
                                                                        key={key}
                                                                        onClick={() => toggleColumn(key)}
                                                                        className={`px-2 py-1 rounded text-[10px] font-bold border transition-all flex items-center gap-1 ${isSelected ? 'bg-blue-50 border-blue-300 text-blue-700' : 'bg-white border-slate-200 text-slate-400'}`}
                                                                        title={evt.full}
                                                                    >
                                                                         {isSelected ? <CheckSquare size={10}/> : <Square size={10}/>}
                                                                         {evt.label}
                                                                    </button>
                                                             )
                                                        })}
                                                 </div>
                                             )}

                                             <div className="mt-2 text-xs text-slate-400">
                                                    Aktualnie sumujesz: <span className="font-bold text-blue-600">
                                                        {activeTab === 'all_competitions' ? selectedAllColumns.length : selectedColumns.length}
                                                    </span> serii. 
                                                    Wynik w kolumnie <span className="bg-blue-100 text-blue-800 px-1 rounded font-mono">Wyb¨®r ¦²</span>.
                                             </div>
                                        </div>

                                        <div className="border-t md:border-t-0 md:border-l border-slate-100 pt-4 md:pt-0 pl-0 md:pl-6">
                                             <div className="text-xs font-bold text-slate-500 uppercase mb-2">
                                                    Ranking "The Best Of":
                                             </div>
                                             <div className="flex items-center gap-4 mb-2">
                                                    <input 
                                                        type="range" min="1" max="10" step="1"
                                                        value={bestN} onChange={(e) => setBestN(parseInt(e.target.value))}
                                                        className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
                                                    />
                                                    <div className="w-12 h-12 rounded-lg bg-purple-50 border border-purple-200 flex items-center justify-center flex-col shrink-0">
                                                         <span className="text-lg font-bold text-purple-700 leading-none">{bestN}</span>
                                                         <span className="text-[8px] text-purple-400 uppercase font-bold">TOP</span>
                                                    </div>
                                             </div>
                                             <div className="flex justify-between items-center mt-2">
                                                    <div className="text-xs text-slate-400">
                                                         Sumuje tylko <span className="font-bold text-purple-600">{bestN}</span> najlepszych wyst?p¨®w.
                                                    </div>
                                                    <button 
                                                         onClick={() => setShowBestNColumn(!showBestNColumn)} 
                                                         className={`flex items-center gap-1 px-2 py-1 text-[10px] font-bold rounded border transition-all ${showBestNColumn ? 'bg-purple-100 text-purple-700 border-purple-200' : 'bg-white text-slate-400 border-slate-200'}`}
                                                    >
                                                         {showBestNColumn ? <Eye size={12}/> : <EyeOff size={12}/>} {showBestNColumn ? 'Ukryj' : 'Poka?'} kolumn?
                                                    </button>
                                             </div>
                                        </div>
                                   </div>
                                </div>
                            ) : (
                                <div className="bg-white rounded-xl border border-slate-200 shadow-sm p-6 h-full flex flex-col justify-center items-center text-center relative overflow-hidden">
                                   <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${activeTab === 'lgp2025' ? 'from-yellow-400 to-orange-500' : 'from-blue-400 to-indigo-500'}`}></div>
                                   {activeTab === 'lgp2025' ? <Sun size={48} className="text-orange-200 mb-4"/> : <Globe size={48} className="text-blue-200 mb-4" />}
                                   <h3 className="text-lg font-bold text-slate-800">
                                     {activeTabTitle}
                                   </h3>
                                   <p className="text-sm text-slate-500 max-w-lg mb-4">
                                     Tabela przedstawia klasyfikacj? generaln?. Zawodnicy oznaczeni na <span className="text-red-600 font-black">czerwono</span> nie oddali ?adnego skoku w ten weekend w Lillehammer (s? nieaktywni).
                                     U?yj filtra "Tylko Draft", aby sprawdzi?, kt¨®rzy z Twoich zawodnik¨®w punktuj?.
                                   </p>
                                   <div className="flex gap-4 text-xs font-bold">
                                        <span className="flex items-center gap-1 bg-indigo-100 text-indigo-700 px-2 py-1 rounded"><Star size={12}/> Tw¨®j Draft</span>
                                        <span className="flex items-center gap-1 bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200"><XCircle size={12}/> Nieaktywny</span>
                                   </div>
                                </div>
                            )}
                        </div>
                    </div>

                    <div className="max-w-[1600px] mx-auto -mx-2 md:mx-auto overflow-hidden rounded-none md:rounded-2xl border-t border-b md:border border-slate-200 shadow-lg bg-white">
                        <div className="overflow-x-auto no-scrollbar">
                            <table className={`w-full ${['results', 'all_competitions'].includes(activeTab) ? 'min-w-[1600px]' : 'min-w-full'} table-fixed`}>
                                <thead>
                                    <tr className="bg-slate-50 border-b border-slate-200 text-left">
                                        <th className="p-3 text-xs font-bold text-slate-500 uppercase tracking-wider w-12 text-center">#</th>
                                        <th className="p-3 text-xs font-bold text-slate-500 uppercase tracking-wider w-56">Zawodnik</th>
                                        
                                        {activeTab === 'results' && (
                                            <>
                                                <th onClick={() => handleSort('seriesCount')} className={`p-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider w-16 text-center cursor-pointer hover:bg-slate-100 ${sortBy === 'seriesCount' ? 'bg-slate-100 text-blue-600' : ''}`} title="Liczba zaliczonych serii">Serii</th>
                                                
                                                {Object.entries(currentEventConfig.columns).map(([key, evt]) => {
                                                        if (!selectedColumns.includes(key)) return null;
                                                        return (
                                                                <th key={key} onClick={() => handleSort(key)} className={`p-2 text-[10px] uppercase tracking-wider text-center cursor-pointer transition-colors border-l border-slate-100 select-none group w-24 ${sortBy === key ? 'bg-blue-50 border-blue-200' : 'hover:bg-slate-100'}`} title={evt.full}>
                                                                    <div className={`flex flex-col items-center gap-1 ${evt.color}`}>
                                                                        <span>{evt.label.split(' ')[0]}</span>
                                                                        {sortBy === key && <div className="text-blue-600">{sortDirection === 'desc' ? <ChevronDown size={12}/> : <ChevronUp size={12}/>}</div>}
                                                                    </div>
                                                                </th>
                                                        )
                                                })}
                                            </>
                                        )}

                                        {activeTab === 'all_competitions' && (
                                            <>
                                                <th onClick={() => handleSort('seriesCount')} className={`p-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider w-16 text-center cursor-pointer hover:bg-slate-100 ${sortBy === 'seriesCount' ? 'bg-slate-100 text-blue-600' : ''}`} title="Liczba zaliczonych serii">Serii</th>
                                                {Object.values(ALL_COMPETITIONS_EVENTS).map((evt) => {
                                                        if (!selectedAllColumns.includes(evt.id)) return null;
                                                        return (
                                                                <th key={evt.id} onClick={() => handleSort(evt.id)} className={`p-2 text-[10px] uppercase tracking-wider text-center cursor-pointer transition-colors border-l border-slate-100 select-none group w-24 ${sortBy === evt.id ? 'bg-blue-50 border-blue-200' : 'hover:bg-slate-100'}`} title={evt.full}>
                                                                    <div className={`flex flex-col items-center gap-1 ${evt.color}`}>
                                                                        <span>{evt.label}</span>
                                                                        {sortBy === evt.id && <div className="text-blue-600">{sortDirection === 'desc' ? <ChevronDown size={12}/> : <ChevronUp size={12}/>}</div>}
                                                                    </div>
                                                                </th>
                                                        )
                                                })}
                                            </>
                                        )}

                                        {(activeTab === 'results' || activeTab === 'all_competitions') && (
                                            <>
                                                {showDraftColumn && activeTab === 'results' && (
                                                    <th onClick={() => handleSort('draftTotal')} className={`p-2 text-[10px] uppercase tracking-wider text-center cursor-pointer border-l-2 border-slate-300 w-24 bg-indigo-50 hover:bg-indigo-100 ${sortBy === 'draftTotal' ? 'bg-indigo-100 text-indigo-800' : 'text-slate-600'}`}>
                                                        <div className="flex flex-col items-center gap-1 font-bold">
                                                             <span className="text-indigo-700">Pkt Draft</span>
                                                             <span className="text-[8px] text-indigo-400">{draftMode === 'weekend' ? 'Weekend' : 'G?¨®wny'}</span>
                                                             {sortBy === 'draftTotal' && (sortDirection === 'desc' ? <ChevronDown size={12}/> : <ChevronUp size={12}/>)}
                                                        </div>
                                                    </th>
                                                )}

                                                <th onClick={() => handleSort('customSum')} className={`p-2 text-[10px] uppercase tracking-wider text-center cursor-pointer border-l border-slate-200 w-24 bg-blue-50 hover:bg-blue-100 ${sortBy === 'customSum' ? 'bg-blue-100 text-blue-800' : 'text-slate-600'}`}>
                                                    <div className="flex flex-col items-center gap-1 font-bold">
                                                         <span>Wyb¨®r ¦²</span>
                                                         {sortBy === 'customSum' && (sortDirection === 'desc' ? <ChevronDown size={12}/> : <ChevronUp size={12}/>)}
                                                    </div>
                                                </th>

                                                {showBestNColumn && (
                                                    <th onClick={() => handleSort('bestNSum')} className={`p-2 text-[10px] uppercase tracking-wider text-center cursor-pointer border-l border-slate-200 w-24 bg-purple-50 hover:bg-purple-100 ${sortBy === 'bestNSum' ? 'bg-purple-100 text-purple-800' : 'text-slate-600'}`}>
                                                        <div className="flex flex-col items-center gap-1 font-bold">
                                                             <span>Top{bestN} ¦²</span>
                                                             {sortBy === 'bestNSum' && (sortDirection === 'desc' ? <ChevronDown size={12}/> : <ChevronUp size={12}/>)}
                                                        </div>
                                                    </th>
                                                )}
                                                
                                                {((activeTab === 'results' && selectedColumns.length === ALL_EVENT_KEYS.length) || activeTab === 'all_competitions') && (
                                                    <th className={`p-3 text-xs font-bold uppercase tracking-wider text-right cursor-pointer border-l border-slate-200 w-28 ${sortBy === 'totalPoints' ? 'bg-slate-800 text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`} onClick={() => handleSort('totalPoints')}>
                                                        <div className="flex items-center justify-end gap-1">
                                                            TOTAL
                                                            {sortBy === 'totalPoints' && (sortDirection === 'desc' ? <ChevronDown size={14}/> : <ChevronUp size={14}/>)}
                                                        </div>
                                                    </th>
                                                )}
                                            </>
                                        )}

                                        {activeTab !== 'results' && activeTab !== 'all_competitions' && (
                                            <>
                                                <th className="p-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-center w-32">Status</th>
                                                <th className={`p-3 text-xs font-bold uppercase tracking-wider text-right cursor-pointer border-l border-slate-200 w-32 ${sortBy === 'points' ? 'bg-slate-100 text-blue-600' : 'text-slate-600 hover:bg-slate-50'}`} onClick={() => { setSortBy('points'); setSortDirection('desc'); }}>
                                                    Punkty {activeTabTitle}
                                                </th>
                                            </>
                                        )}
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-100">
                                    {displayData.map((skier, index) => (
                                        <tr key={skier.name} className={getRowStyle(skier)}>
                                            <td className="p-2 text-center">
                                                <div className={`w-6 h-6 mx-auto flex items-center justify-center rounded-full text-xs font-bold border ${getRankBadgeStyle(skier.displayRank)}`}>
                                                    {skier.displayRank}
                                                </div>
                                            </td>
                                            <td className="p-2 truncate">
                                                <div className="flex items-center gap-3">
                                                    <img src={`https://flagcdn.com/w40/${skier.isoCode}.png`} alt={skier.country} className="w-6 h-4 object-cover rounded-sm shadow-sm" loading="lazy" />
                                                    <div className="overflow-hidden">
                                                        <div className="flex items-center gap-1">
                                                            <div className={`text-sm truncate ${!skier.isActive && activeTab !== 'results' && activeTab !== 'all_competitions' ? 'font-extrabold text-red-900' : 'font-bold text-slate-800'}`} title={skier.name}>{skier.name}</div>
                                                            {skier.isDraft && <Star size={12} className="text-indigo-600 fill-indigo-600 shrink-0" />}
                                                        </div>
                                                        <div className="text-[10px] text-slate-400 font-mono flex gap-1">{skier.country}</div>
                                                    </div>
                                                </div>
                                            </td>

                                            {activeTab === 'results' && (
                                                <>
                                                    <td className="p-2 text-center text-xs text-slate-500 font-mono">{skier.seriesCount}</td>
                                                    {Object.keys(currentEventConfig.columns).map((evtKey) => {
                                                        if (!selectedColumns.includes(evtKey)) return null;
                                                        const val = skier[evtKey];
                                                        const dist = skier[evtKey + '_dist'];
                                                        const note = skier[evtKey + '_note'];
                                                        const comp = skier[evtKey + '_comp'];

                                                        return (
                                                            <td key={evtKey} className={`p-1 text-center border-l border-slate-50 ${sortBy === evtKey ? 'bg-blue-50/30 font-bold text-blue-900' : ''}`}>
                                                                {val > 0 ? (
                                                                    <>
                                                                      <div className={`text-sm mb-1 ${sortBy === evtKey ? 'font-black text-blue-800' : 'font-bold text-slate-800'}`}>{val.toFixed(1)}</div>
                                                                      {dist && (
                                                                        <div className="flex flex-col gap-0.5 border-t border-slate-100 pt-1">
                                                                          <div className="text-[10px] text-slate-700 font-bold leading-none flex justify-center items-center gap-1">
                                                                              <span className="text-[8px] uppercase text-slate-400 font-normal">Odleg?o??:</span>
                                                                              {dist.toFixed(1)}m
                                                                          </div>
                                                                          <div className="flex justify-center gap-2 text-[9px] font-semibold text-slate-600 leading-none">
                                                                             <span title="Nota"><span className="text-slate-400 font-normal">Nota:</span>{note}</span>
                                                                             <span title="Kompensata"><span className="text-slate-400 font-normal">Komp.:</span>{comp > 0 ? '+' : ''}{comp}</span>
                                                                          </div>
                                                                        </div>
                                                                      )}
                                                                    </>
                                                                ) : (<span className="text-[10px] text-slate-200">-</span>)}
                                                            </td>
                                                        );
                                                    })}
                                                </>
                                            )}

                                            {activeTab === 'all_competitions' && (
                                                <>
                                                    <td className="p-2 text-center text-xs text-slate-500 font-mono">{skier.seriesCount}</td>
                                                    {Object.values(ALL_COMPETITIONS_EVENTS).map((evt) => {
                                                        if (!selectedAllColumns.includes(evt.id)) return null;
                                                        const val = skier[evt.id];
                                                        const dist = skier[evt.id + '_dist'];
                                                        const note = skier[evt.id + '_note'];
                                                        const comp = skier[evt.id + '_comp'];
                                                        
                                                        return (
                                                            <td key={evt.id} className={`p-1 text-center border-l border-slate-50 ${sortBy === evt.id ? 'bg-blue-50/30 font-bold text-blue-900' : ''}`}>
                                                                {val > 0 ? (
                                                                    <>
                                                                      <div className={`text-sm mb-1 ${sortBy === evt.id ? 'font-black text-blue-800' : 'font-bold text-slate-800'}`}>{val.toFixed(1)}</div>
                                                                       {dist && (
                                                                        <div className="flex flex-col gap-0.5 border-t border-slate-100 pt-1">
                                                                          <div className="text-[10px] text-slate-700 font-bold leading-none flex justify-center items-center gap-1">
                                                                              <span className="text-[8px] uppercase text-slate-400 font-normal">Odleg?o??:</span>
                                                                              {dist.toFixed(1)}m
                                                                          </div>
                                                                          <div className="flex justify-center gap-2 text-[9px] font-semibold text-slate-600 leading-none">
                                                                             <span title="Nota"><span className="text-slate-400 font-normal">Nota:</span>{note}</span>
                                                                             <span title="Kompensata"><span className="text-slate-400 font-normal">Komp.:</span>{comp > 0 ? '+' : ''}{comp}</span>
                                                                          </div>
                                                                        </div>
                                                                      )}
                                                                    </>
                                                                ) : (<span className="text-[10px] text-slate-200">-</span>)}
                                                            </td>
                                                        );
                                                    })}
                                                </>
                                            )}

                                            {(activeTab === 'results' || activeTab === 'all_competitions') && (
                                                <>
                                                    {showDraftColumn && activeTab === 'results' && (
                                                        <td className={`p-2 text-center border-l-2 border-slate-200 font-mono text-xs bg-indigo-50 text-indigo-800 font-bold`}>{skier.draftTotal}</td>
                                                    )}
                                                    <td className={`p-2 text-center border-l-2 border-slate-200 font-mono text-xs ${sortBy === 'customSum' ? 'bg-blue-100 font-bold text-blue-900' : 'bg-blue-50/30 text-blue-700'}`}>{skier.customSum.toFixed(1)}</td>
                                                    
                                                    {showBestNColumn && (
                                                        <td className={`p-2 text-center border-l border-slate-200 font-mono text-xs ${sortBy === 'bestNSum' ? 'bg-purple-100 font-bold text-purple-900' : 'bg-purple-50/30 text-purple-700'}`}>{skier.bestNSum.toFixed(1)}</td>
                                                    )}
                                                    
                                                    {((activeTab === 'results' && selectedColumns.length === ALL_EVENT_KEYS.length) || activeTab === 'all_competitions') && (
                                                        <td className={`p-2 text-right border-l border-slate-100 ${sortBy === 'totalPoints' ? 'bg-slate-800 text-white' : ''}`}>
                                                            <div className={`font-extrabold text-sm ${sortBy === 'totalPoints' ? 'text-white' : 'text-slate-800'}`}>{skier.totalPoints.toFixed(1)}</div>
                                                            {skier.avgPoints > 0 && <div className={`text-[10px] ${sortBy === 'totalPoints' ? 'text-slate-400' : 'text-slate-400'}`}>? {skier.avgPoints}</div>}
                                                        </td>
                                                    )}
                                                </>
                                            )}

                                            {activeTab !== 'results' && activeTab !== 'all_competitions' && (
                                                <>
                                                    <td className="p-2 text-center">
                                                        {skier.isActive ? (
                                                            <span className="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-[10px] font-bold uppercase tracking-wide">Aktywny</span>
                                                        ) : (
                                                            <span className="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-200 text-red-900 border border-red-300 text-[10px] font-black uppercase tracking-wide shadow-sm"><XCircle size={12} strokeWidth={3} /> Nieaktywny</span>
                                                        )}
                                                    </td>
                                                    <td className="p-2 text-right border-l border-slate-100">
                                                        <div className="font-extrabold text-lg text-slate-800">{skier.points}</div>
                                                    </td>
                                                </>
                                            )}
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                            {displayData.length === 0 && <div className="p-12 text-center text-slate-400">Nie znaleziono zawodnik¨®w spe?niaj?cych kryteria.</div>}
                        </div>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(
            <ErrorBoundary>
                <SkiJumpingApp />
            </ErrorBoundary>
        );
    </script>
</body>
</html>